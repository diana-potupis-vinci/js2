"use strict";(self.webpackChunkmyjscourse=self.webpackChunkmyjscourse||[]).push([[1817],{8942:function(e,n,t){t.r(n),t.d(n,{default:function(){return T}});var r=t(3905),l=t(7294);function s(e){const n=Object.assign({h1:"h1",p:"p",strong:"strong",a:"a",ul:"ul",li:"li",h2:"h2",pre:"pre",code:"code",br:"br",ol:"ol",h4:"h4"},(0,r.ah)(),e.components),{PathViewer:t,PathViewerItem:s,InternalPageMenu:a,InternalPageMenuItem:i,InternalPageTitle:u}=n;return a||o("InternalPageMenu",!0),i||o("InternalPageMenuItem",!0),u||o("InternalPageTitle",!0),t||o("PathViewer",!0),s||o("PathViewerItem",!0),l.createElement(l.Fragment,null,l.createElement(t,null,l.createElement(s,{to:"/"}," web2course "),l.createElement(s,{to:"/part2"}," Partie 2 "),l.createElement(s,{selected:!0}," m) Les sessions ")),"\n",l.createElement(n.h1,null,"m) Les sessions"),"\n",l.createElement(a,null,l.createElement(i,null," Où sauvegarder de l'info dans un browser ? "),l.createElement(i,null," Persistance de données de session via le web storage "),l.createElement(i,null," 🍬 Persistance de données de session via des cookies "),l.createElement(i,null," 🍬 Gestion de sessions côté client via Express pour une API "),l.createElement(i,null," 🍬 Test via REST Client d'une RESTful API attendant des cookies "),l.createElement(i,null," Exercice 2.14 : Persistance de la session de myMovies dans le web storage ")),"\n",l.createElement(n.h1,null,l.createElement(u,null," Où sauvegarder de l'info dans un browser ? ")),"\n",l.createElement(n.p,null,"Nous avons vu qu'une des exigences associées à la création d'une application selon l'architecture REST, c'est qu'elle soit ",l.createElement(n.strong,null,"stateless"),", c'est à dire que l'API ne peut pas garder l'état du client, sa session, côté serveur."),"\n",l.createElement(n.p,null,"C'est donc au client de sauvegarder ses données de session."),"\n",l.createElement(n.p,null,"Pour rappel, nous avons déjà vu les avantages et les inconvénients d'avoir un serveur ",l.createElement(n.strong,null,"stateless")," par rapport à un serveur ",l.createElement(n.strong,null,"stateful")," lorsque nous avons traité de l'authentification : ",l.createElement(n.a,{href:"/js2/modules/7/#a1.4"},"Module 7 : a.1.4) Stateful VS stateless authentication"),"."),"\n",l.createElement(n.p,null,"Mais où pouvons nous sauvegarder des données de manière persistante côté client ?"),"\n",l.createElement(n.p,null,"Il existe deux  façons principales de sauvegarder de l'info dans un browser :"),"\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,"le ",l.createElement(n.strong,null,"web storage")," ;"),"\n",l.createElement(n.li,null,"les ",l.createElement(n.strong,null,"cookies"),"."),"\n"),"\n",l.createElement(n.p,null,"Dans le cadre de ce cours, nous allons voir comment sauvegarder de l'info à l'aide de ces deux façons."),"\n",l.createElement(n.p,null,"NB : le browser met à disposition d'autres API un peu moins connues pour sauvegarder des infos. Nous ne les verrons pas dans le cadre de ce cours, mais il reste néanmoins intéressant de lire rapidement de quoi il s'agit :"),"\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,l.createElement(n.strong,null,"IndexedDB API")," : permet de sauvegarder côté client de grandes quantités d'infos structurées, incluant des fichiers ; c'est une base de données orientée objets en JS qui permet les transactions."),"\n",l.createElement(n.li,null,l.createElement(n.strong,null,"Cache API")," : permet d'enregistrer et retrouver des requêtes et leur réponses. Bien qu'à la base créé pour pouvoir fournir des réponses plus rapides à certaines requêtes, cette API peut aussi être utilisée comme mécanisme général de stockage."),"\n"),"\n",l.createElement(n.h1,null,l.createElement(u,null," Persistance de données de session via le web storage ")),"\n",l.createElement(n.h2,null,"Introduction"),"\n",l.createElement(n.p,null,"Le ",l.createElement(n.strong,null,"Web Storage API")," fournit un mécanisme permettant aux browser d'enregistrer des paires ",l.createElement(n.strong,null,"clé / valeur")," d'une manière plus intuitive que l'utilisation de cookies."),"\n",l.createElement(n.p,null,"Il existe deux mécanismes au sein du web storage :"),"\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,l.createElement(n.strong,null,"sessionStorage")," :","\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,"il offre un espace de stockage séparé pour chaque origine pour la durée de la session d'une page, tant que le browser est ouvert."),"\n",l.createElement(n.li,null,"les clés / valeurs y sont enregistrées sous forme de string uniquement ;"),"\n",l.createElement(n.li,null,"il met à disposition un espace de stockage plus grand qu'un cookie, ~5MB maximum par origine ;"),"\n"),"\n"),"\n",l.createElement(n.li,null,l.createElement(n.strong,null,"localStorage")," :","\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,"offre aussi un espace de stockage séparé pour chaque origine, mais les données persistent quand le browser est fermé et réouvert ;"),"\n",l.createElement(n.li,null,"espace de stockage plus grand qu'un cookie, limité à ~10MB en cas de crash/restart du browser."),"\n"),"\n"),"\n"),"\n",l.createElement(n.p,null,"Les principales méthodes offertes par ",l.createElement(n.strong,null,"sessionStorage")," et ",l.createElement(n.strong,null,"localStorage")," sont les mêmes. Voici quelques exemples de codes par méthode."),"\n",l.createElement(n.h2,null,"setItem()"),"\n",l.createElement(n.p,null,"Cette méthode permet d'enregistrer, pour une clé donnée, la valeur associée :"),"\n",l.createElement(n.pre,{numbered:!0,highlighting:"5"},l.createElement(n.code,{className:"language-js"},"const STORE_NAME = 'user';\r\n\r\nconst setUserSessionData = (user) => {\r\n  const storageValue = JSON.stringify(user);\r\n  localStorage.setItem(STORE_NAME, storageValue);\r\n};\n")),"\n",l.createElement(n.p,null,"Comme le web storage est un système de paires de clé-valeur qui enregistre les données sous forme de string, cela vous rappelle p-e qu'il est possible d'enregistrer des objets."),"\n",l.createElement(n.p,null,"💭 Comment enregistrer un objet JS sous forme de string ?",l.createElement(n.br),"\n","Hé bien il suffit de le sérialiser, comme cela est fait dans l'exemple à l'aide de la méthode ",l.createElement(n.strong,null,l.createElement(n.code,null,"JSON.stringify()")),"."),"\n",l.createElement(n.h2,null,"getItem()"),"\n",l.createElement(n.p,null,"Cette méthode permet d'obtenir la valeur associée à la clé donnée en argument :"),"\n",l.createElement(n.pre,{numbered:!0,highlighting:"4"},l.createElement(n.code,{className:"language-js"},"const STORE_NAME = 'user';\r\n\r\nconst getUserSessionData = () => {\r\n  const retrievedUser = localStorage.getItem(STORE_NAME);\r\n  if (!retrievedUser) return;\r\n  return JSON.parse(retrievedUser);\r\n};\n")),"\n",l.createElement(n.p,null,"Pour cet exemple, comme la valeur a été sérialisée, nous pouvons récupérer l'objet grâce à la méthode ",l.createElement(n.strong,null,l.createElement(n.code,null,"JSON.parse()")),"."),"\n",l.createElement(n.h2,null,"removeITem()"),"\n",l.createElement(n.p,null,"Cette méthode permet d'effacer une clé / valeur :"),"\n",l.createElement(n.pre,{numbered:!0,highlighting:"4"},l.createElement(n.code,{className:"language-js"},"const STORE_NAME = 'user';\r\n\r\nconst removeSessionData = () => {\r\n  localStorage.removeItem(STORE_NAME);\r\n};\n")),"\n",l.createElement(n.h2,null,"clear()"),"\n",l.createElement(n.p,null,"Cette méthode permet d'effacer tout l'espace de stockage pour une origine donnée."),"\n",l.createElement(n.p,null,"Cette méthode est très utile lorsque l'on souhaite effacer toute la session d'un utilisateur, notamment lors du logout d'un utilisateur."),"\n",l.createElement(n.h1,null,l.createElement(u,null," Mise en place du localStorage pour sauvegarder les données de session ")),"\n",l.createElement(n.p,null,"Dans le cadre du site nous permettant de gérer une pizzeria, nous allons faire en sorte de sauvegarder les données de session au sein du ",l.createElement(n.strong,null,"localStorage"),", et plus juste en mémoire vive."),"\n",l.createElement(n.p,null,"Veuillez démarrer la dernière version de la RESTful API de la pizzeria. En cas de souci, vous pouvez utiliser ce code-ci :\r\n",l.createElement(n.a,{href:"https://github.com/e-vinci/js-demos/tree/main/backend-restful-api/restful-api-essentials/safe"},"safe"),"."),"\n",l.createElement(n.p,null,"Nous allons maintenant finaliser le développement de l'IHM ",l.createElement(n.a,{href:"https://github.com/e-vinci/js-demos/tree/main/frontend/frontend-essentials/jwt-fetch"},"jwt-fetch"),"."),"\n",l.createElement(n.p,null,"Au sein de votre repo ",l.createElement(n.strong,null,"web2"),", veuillez créer le projet nommé ",l.createElement(n.strong,null,"/web2/tutorials/pizzeria/hmi/web-storage")," sur base d'un copier-coller de ",l.createElement(n.strong,null,"/web2/tutorials/pizzeria/hmi/jwt-fetch")," (ou ",l.createElement(n.a,{href:"https://github.com/e-vinci/js-demos/tree/main/frontend/frontend-essentials/jwt-fetch"},"jwt-fetch"),")."),"\n",l.createElement(n.p,null,"Pour la suite du tutoriel, nous considérons que tous les chemins absolus démarrent du répertoire\r\n",l.createElement(n.strong,null,"/web2/tutorials/pizzeria/hmi/web-storage"),"."),"\n",l.createElement(n.p,null,"Afin de sauvegarder les données de session, c'est à dire l'objet ",l.createElement(n.strong,null,"authenticatedUser")," contenant un token et un username, nous devons juste mettre à jour le fichier ",l.createElement(n.strong,null,"/usr/utils/auths.js")," :"),"\n",l.createElement(n.pre,{numbered:!0,highlighting:"1,7,10,15-16,24"},l.createElement(n.code,{className:"language-js"},"const STORE_NAME = 'user';\r\nlet currentUser;\r\n\r\nconst getAuthenticatedUser = () => {\r\n  if (currentUser !== undefined) return currentUser;\r\n\r\n  const serializedUser = localStorage.getItem(STORE_NAME);\r\n  if (!serializedUser) return undefined;\r\n\r\n  currentUser = JSON.parse(serializedUser);\r\n  return currentUser;\r\n};\r\n\r\nconst setAuthenticatedUser = (authenticatedUser) => {\r\n  const serializedUser = JSON.stringify(authenticatedUser);\r\n  localStorage.setItem(STORE_NAME, serializedUser);\r\n\r\n  currentUser = authenticatedUser;\r\n};\r\n\r\nconst isAuthenticated = () => currentUser !== undefined;\r\n\r\nconst clearAuthenticatedUser = () => {\r\n  localStorage.removeItem(STORE_NAME);\r\n  currentUser = undefined;\r\n};\r\n\r\n// eslint-disable-next-line object-curly-newline\r\nexport { getAuthenticatedUser, setAuthenticatedUser, isAuthenticated, clearAuthenticatedUser };\n")),"\n",l.createElement(n.p,null,"Au sein de ",l.createElement(n.strong,null,l.createElement(n.code,null,"getAuthenticatedUser"))," :"),"\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,"on fait un premier check afin d'éviter d'aller lire dans le ",l.createElement(n.strong,null,"localStorage")," si la variable ",l.createElement(n.strong,null,"currentUser")," est déjà initialisée."),"\n",l.createElement(n.li,null,"on parse l'utilisateur authentifié et sérialisé qui est retrouvé dans le ",l.createElement(n.strong,null,"localStorage")," via la clé ",l.createElement(n.strong,null,"STORE_NAME"),"."),"\n"),"\n",l.createElement(n.p,null,"Au sein de ",l.createElement(n.strong,null,l.createElement(n.code,null,"setAuthenticatedUser")),", on sérialise ",l.createElement(n.strong,null,"authenticatedUser")," avant d'ajouter une paire clé / valeur au ",l.createElement(n.strong,null,"localStorage"),".  Ces données restent dans le browser, peu importe le nombre de fois que l'on ferme son browser."),"\n",l.createElement(n.p,null,"Dans ",l.createElement(n.strong,null,l.createElement(n.code,null,"clearAuthenticatedUser")),", on efface la clé / valeur associée à l'utilisateur authentifié (via la clé ",l.createElement(n.strong,null,"STORE_NAME"),")."),"\n",l.createElement(n.p,null,"Veuillez bien mettre à jour votre code et tester l'application.",l.createElement(n.br),"\n","Connectez-vous à l'aide de l'utilisateur ",l.createElement(n.strong,null,"manager"),".  Veuillez fermer votre browser.",l.createElement(n.br),"\n","Veuillez le réouvrir.",l.createElement(n.br),"\n","Voilà, vous devriez automatiquement être authentifié, veuillez observer l'état de la Navbar pour vous en assurer."),"\n",l.createElement(n.p,null,"💭 Où puis-je observer l'état des données sauvegardées dans le web storage de mon browser ?",l.createElement(n.br),"\n","Tout en ayant la fenêtre de votre application ouverte, via Chrome, allez dans vos outils de développeurs : ",l.createElement(n.strong,null,"F12"),".",l.createElement(n.br),"\n","Puis, dans l'onglet ",l.createElement(n.strong,null,"Application"),", vous trouverez dans ",l.createElement(n.strong,null,"Storage")," : ",l.createElement(n.strong,null,"Local Storage")," et ",l.createElement(n.strong,null,"Session Storage"),".",l.createElement(n.br),"\n","Ici, nous utilisons le ",l.createElement(n.strong,null,"Local Storage"),", donc cliquez dessus, vous verrez apparaître ",l.createElement(n.code,null,"http://localhost:8080"),". Cliquez sur cette URL, et vous verrez vos données de session, quelque chose du style ",l.createElement(n.code,null,'{"username":"manager","token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6Im1hbmFnZXIiLCJpYXQiOjE2NjE3NjM3MDksImV4cCI6MTc0ODE2MzcwOX0.jAxH0WsOgiK5vf4QduDZ8JgTR-SKC42G9aPieV_OTOo"}'),".",l.createElement(n.br),"\n","N'hésitez pas à faire un clic droit sur l'URL ",l.createElement(n.code,null,"http://localhost:8080"),", puis ",l.createElement(n.strong,null,"Clear"),".",l.createElement(n.br),"\n","Si vous faites ensuite un refresh de votre page, comme votre session aura été effacée, votre utilisateur ne sera plus connecté. Votre Navbar afficher le menu pour un utilisateur anonyme !",l.createElement(n.br),"\n","Faites ce test, c'est intéressant 😉."),"\n",l.createElement(n.p,null,"Si tout fonctionne bien, faites un ",l.createElement(n.strong,null,"commit")," de votre repo (",l.createElement(n.strong,null,"web2"),') avec le message\r\n"',l.createElement(n.strong,null,"web storage"),'".'),"\n",l.createElement(n.p,null,"En cas de souci, vous pouvez utiliser le code du tutoriel :"),"\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,"pour le frontend : ",l.createElement(n.a,{href:"https://github.com/e-vinci/js-demos/tree/main/frontend/frontend-essentials/web-storage"},"web-storage"),"."),"\n",l.createElement(n.li,null,"pour l'API : ",l.createElement(n.a,{href:"https://github.com/e-vinci/js-demos/tree/main/backend-restful-api/restful-api-essentials/safe"},"safe"),"."),"\n"),"\n",l.createElement(n.h1,null,l.createElement(u,null," 🍬 Persistance de données de session via des cookies ")),"\n",l.createElement(n.p,null,"Un cookie représente des données qu'un serveur envoie à un browser.",l.createElement(n.br),"\n","Le browser peut sauver ce cookie. Pour chaque requête faite au serveur sur la même origine (que l'origine où le cookie a été reçu), le cookie sera automatiquement envoyé au serveur."),"\n",l.createElement(n.p,null,"Il fut un temps où les cookies étaient utilisés comme un mécanisme général de stockage de données côté client."),"\n",l.createElement(n.p,null,"👍 Actuellement, si les cookies sont utilisés pour sauvegarder les données de session, il faut se protéger contre les attaques XSS et rendre les cookies inaccessibles au JavaScript. On utilise donc les cookies ",l.createElement(n.strong,null,"HttpOnly")," qui sont inaccessibles à la ",l.createElement(n.strong,null,"Document.cookie API"),"."),"\n",l.createElement(n.p,null,"Du coup, si des données de session doivent être utilisée pour l'IHM, on ne peut pas se passer du ",l.createElement(n.strong,null,"web storage")," !"),"\n",l.createElement(n.p,null,"Pour la suite, on va donc voir :"),"\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,"comment utiliser Express pour créer des cookies au niveau d'une API ;"),"\n",l.createElement(n.li,null,"comment rendre ces cookies inaccessibles aux attaques XSS en configurant ",l.createElement(n.strong,null,"HttpOnly")," ;"),"\n",l.createElement(n.li,null,"que, comme les cookies sont envoyés automatiquement au serveur, il faudra mettre à jour notre IHM pour ne plus envoyer le token via un authorization header. L'API va charger le token dans le cookie, et comme le cookie sera automatiquement envoyé au serveur via le browser, le code de l'IHM et les fetch seront plus simples."),"\n",l.createElement(n.li,null,"l'embêtant dans ce que nous allons faire, c'est que comme nous allons sécuriser le cookie, nous n'aurons pas accès au ",l.createElement(n.strong,null,"username")," via le cookie... Nous pourrions :","\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,"soit toujours utiliser le web storage pour sauvegarder le ",l.createElement(n.strong,null,"username"),","),"\n",l.createElement(n.li,null,"soit accepter de ne plus afficher le ",l.createElement(n.strong,null,"username")," et avoir aucun nouveau code à ajouter au niveau du frontend (juste enlever les authorization header inutiles) ;"),"\n",l.createElement(n.li,null,"soit mettre à jour l'API pour offrir une route de type ",l.createElement(n.strong,null,"GET /users/me")," qui renvoie les données d'un utilisateur à la demande d'une requête cliente. Dans ce cas-là, à chaque fois que l'utilisateur ouvre le browser, la première chose à faire serait d'appeler cette opération de l'API."),"\n"),"\n"),"\n"),"\n",l.createElement(n.p,null,"Pour le tutoriel, nous avons choisi la première option. Dans vos exercices optionnels, n'hésitez pas à explorer une autre option."),"\n",l.createElement(n.p,null,"💭 Mais pourquoi sécuriser le cookie et le rendre inaccessible au JS ?",l.createElement(n.br),"\n","Hé bien, imaginez qu'un attaquant arrive à faire une attaque XSS, via un JS malicieux, renvoyant le cookie de chaque utilisateur qui affiche le menu des pizzas vers un serveur malicieux...",l.createElement(n.br),"\n","Via ce cookie, qui contient le token de l'utilisateur, le pirate peut se faire passer pour l'utilisateur piraté !",l.createElement(n.br),"\n","Bon, pour la pizzeria, c'est p-e pas si grave, mais imaginez si c'est le token associé à votre compte banquaire !",l.createElement(n.br),"\n","Si le cookie est inaccessible au JS, il est donc impossible pour un hackeur, via du JS malicieux, d'accéder au token, et donc, de l'envoyer 😌."),"\n",l.createElement(n.h1,null,l.createElement(u,null," 🍬 Gestion de sessions côté client via Express pour une API ")),"\n",l.createElement(n.h2,null,"Intro"),"\n",l.createElement(n.p,null,"Nous allons donc créer une nouvelle version de l'API sauvegardant le token d'un utilisateur au sein d'un cookie, ainsi que son username, sans que ces infos soient accessible au JS côté client."),"\n",l.createElement(n.p,null,"Pour ce faire nous allons utiliser la librairie ",l.createElement(n.a,{href:"https://github.com/expressjs/cookie-session"},"cookie-session")," qui permet d'enregistrer des données de session dans des cookies."),"\n",l.createElement(n.p,null,"Nous allons maintenant continuer le développement de l'API ",l.createElement(n.a,{href:"https://github.com/e-vinci/js-demos/tree/main/backend-restful-api/restful-api-essentials/safe"},"safe"),"."),"\n",l.createElement(n.p,null,"Au sein de votre repo ",l.createElement(n.strong,null,"web2"),", veuillez créer le projet nommé ",l.createElement(n.strong,null,"/web2/tutorials/pizzeria/api/cookies")," sur base d'un copié collé de ",l.createElement(n.strong,null,"/web2/tutorials/pizzeria/api/safe")," (ou ",l.createElement(n.a,{href:"https://github.com/e-vinci/js-demos/tree/main/backend-restful-api/restful-api-essentials/safe"},"safe"),")."),"\n",l.createElement(n.p,null,"Pour la suite du tutoriel, nous considérons que tous les chemins absolus démarrent du répertoire\r\n",l.createElement(n.strong,null,"/web2/tutorials/pizzeria/api/cookies"),"."),"\n",l.createElement(n.p,null,"Veuillez installer la librairie ",l.createElement(n.strong,null,"cookie-session")," au sein de votre nouveau projet ",l.createElement(n.strong,null,"auths")," :"),"\n",l.createElement(n.pre,null,l.createElement(n.code,{className:"language-bash"},"npm i cookie-session\n")),"\n",l.createElement(n.h2,null,"Utilisation de la fonction middleware ",l.createElement(n.code,null,"cookieSession")),"\n",l.createElement(n.p,null,"Veuillez mettre à jour ",l.createElement(n.strong,null,"/app.json")," pour mettre en place la gestion de cookies :"),"\n",l.createElement(n.pre,{highlighting:"4,12-23"},l.createElement(n.code,{className:"language-js"},"const express = require('express');\r\nconst cookieParser = require('cookie-parser');\r\nconst logger = require('morgan');\r\nconst cookieSession = require('cookie-session');\r\n\r\nconst usersRouter = require('./routes/users');\r\nconst pizzaRouter = require('./routes/pizzas');\r\nconst authsRouter = require('./routes/auths');\r\n\r\nconst app = express();\r\n\r\nconst expiryDateIn3Months = new Date(Date.now() + 1000 * 60 * 60 * 24 * 30 * 3);\r\nconst cookieSecreteKey = 'YouWouldnot!not!like!mypizza';\r\napp.use(\r\n  cookieSession({\r\n    name: 'user',\r\n    keys: [cookieSecreteKey],\r\n    cookie: {\r\n      httpOnly: true,\r\n      expires: expiryDateIn3Months,\r\n    },\r\n  }),\r\n);\r\n\r\napp.use(logger('dev'));\r\napp.use(express.json());\r\napp.use(express.urlencoded({ extended: false }));\r\napp.use(cookieParser());\r\n\r\napp.use('/users', usersRouter);\r\napp.use('/pizzas', pizzaRouter);\r\napp.use('/auths', authsRouter);\r\n\r\nmodule.exports = app;\n")),"\n",l.createElement(n.p,null,"Nous avons donc bien indiqué que le cookie est inaccessible au JS via : ",l.createElement(n.code,null,"httpOnly: true"),"."),"\n",l.createElement(n.p,null,"Nous avons fait en sorte que le cookie soit signé via la clé ",l.createElement(n.code,null,"cookieSecreteKey"),".",l.createElement(n.br),"\n","Le mécanisme de signature correspond à ce qui a été vu dans le cadre des tokens JWT.",l.createElement(n.br),"\n","Ainsi, si un cookie venait être modifié par un utilisateur, lors de la vérification du cookie, cela sera automatiquement détecté par la fonction middleware ",l.createElement(n.code,null,"cookieSession")," et la session ne sera pas créée."),"\n",l.createElement(n.p,null,"Pour info, la fonction middleware ",l.createElement(n.code,null,"cookieSession")," va créer deux cookies :"),"\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,"un cookie portant comme nom la valeur de ",l.createElement(n.code,null,"name")," ; il est encodé en base64. N'hésitez pas à vous amuser à décoder un cookie généré par ",l.createElement(n.code,null,"cookieSession")," sur ",l.createElement(n.a,{href:"https://www.base64decode.org/"},"base64decode"),"."),"\n",l.createElement(n.li,null,"un cookie portant comme nom la valeur de ",l.createElement(n.code,null,"name")," + ",l.createElement(n.code,null,".sig")," : c'est la signature qui prévient contre le \"tempering\" (acte intentionnel mais non autorisé qui amène à la modification d'un système ou de données)."),"\n"),"\n",l.createElement(n.h2,null,"Lecture et ajout de données de session via ",l.createElement(n.code,null,"req.session")),"\n",l.createElement(n.p,null,"Pour créer des données de session, il suffit de simplement les ajouter à l'objet ",l.createElement(n.strong,null,l.createElement(n.code,null,"req.session")),"."),"\n",l.createElement(n.p,null,"Dans le cadre de la RESTful API gérant les pizzas, cela est fait lors d'une opération de type ",l.createElement(n.strong,null,"register")," ou ",l.createElement(n.strong,null,"login"),"."),"\n",l.createElement(n.p,null,"Veuillez mettre à jour le router ",l.createElement(n.strong,null,"/routes/auths.js")," :"),"\n",l.createElement(n.pre,{numbered:!0,highlighting:"17,19,33,35,38-42,44-47"},l.createElement(n.code,{className:"language-js"},"const express = require('express');\r\nconst { register, login } = require('../models/users');\r\n\r\nconst router = express.Router();\r\n\r\n/* Register a user */\r\nrouter.post('/register', async (req, res) => {\r\n  const username = req?.body?.username?.length !== 0 ? req.body.username : undefined;\r\n  const password = req?.body?.password?.length !== 0 ? req.body.password : undefined;\r\n\r\n  if (!username || !password) return res.sendStatus(400); // 400 Bad Request\r\n\r\n  const authenticatedUser = await register(username, password);\r\n\r\n  if (!authenticatedUser) return res.sendStatus(409); // 409 Conflict\r\n\r\n  createCookieSessionData(req, authenticatedUser);\r\n\r\n  return res.json({ username: authenticatedUser.username });\r\n});\r\n\r\n/* Login a user */\r\nrouter.post('/login', async (req, res) => {\r\n  const username = req?.body?.username?.length !== 0 ? req.body.username : undefined;\r\n  const password = req?.body?.password?.length !== 0 ? req.body.password : undefined;\r\n\r\n  if (!username || !password) return res.sendStatus(400); // 400 Bad Reques\r\n\r\n  const authenticatedUser = await login(username, password);\r\n\r\n  if (!authenticatedUser) return res.sendStatus(401); // 401 Unauthorized\r\n\r\n  createCookieSessionData(req, authenticatedUser);\r\n\r\n  return res.json({ username: authenticatedUser.username });\r\n});\r\n\r\n/* Logout a user */\r\nrouter.get('/logout', (req, res) => {\r\n  req.session = null;\r\n  return res.sendStatus();\r\n});\r\n\r\nfunction createCookieSessionData(req, authenticatedUser) {\r\n  req.session.username = authenticatedUser.username;\r\n  req.session.token = authenticatedUser.token;\r\n}\r\n\r\nmodule.exports = router;\n")),"\n",l.createElement(n.p,null,"Dans le code ci-dessus, nous préparons les données de session qui seront écrites dans le cookie à l'aide de l'objet ",l.createElement(n.code,null,"req.session"),".",l.createElement(n.br),"\n","Lorsque nous renvoyons du JSON aux clients, nous ne renvoyons plus le token, mais juste le username de l'utilisateur. L'application cliente, le browser, pourra utiliser cette info pour afficher le nom de l'utilisateur. Pour rappel, le browser n'a pas accès, via le JS, à l'info se trouvant dans le cookie."),"\n",l.createElement(n.p,null,"Quand nous gérons une session via des cookies, il n'est pas évident de bien clôre une session. Nous avons créé une nouvelle opération de type ",l.createElement(n.strong,null,"GET /auths/logout")," qui permet d'effacer les données de session d'un utilisateur."),"\n",l.createElement(n.p,null,"Il nous reste à changer le mécanisme d'autorisation.\r\nLes tokens ne seront plus reçu via un authorization header, mais via un cookie.",l.createElement(n.br),"\n","Nous allons donc mettre à jour le middleware ",l.createElement(n.strong,null,"/utils/authorize")," (1 seule ligne) :"),"\n",l.createElement(n.pre,{numbered:!0,highlighting:"7"},l.createElement(n.code,{className:"language-js"},"const jwt = require('jsonwebtoken');\r\nconst { readOneUserFromUsername } = require('../models/users');\r\n\r\nconst jwtSecret = 'ilovemypizza!';\r\n\r\nconst authorize = (req, res, next) => {\r\n  const { token } = req.session;\r\n  if (!token) return res.sendStatus(401);\r\n\r\n  try {\r\n    const decoded = jwt.verify(token, jwtSecret);\r\n    console.log('decoded', decoded);\r\n    const { username } = decoded;\r\n\r\n    const existingUser = readOneUserFromUsername(username);\r\n\r\n    if (!existingUser) return res.sendStatus(401);\r\n\r\n    req.user = existingUser; // request.user object is available in all other middleware functions\r\n    return next();\r\n  } catch (err) {\r\n    console.error('authorize: ', err);\r\n    return res.sendStatus(401);\r\n  }\r\n};\r\n\r\nconst isAdmin = (req, res, next) => {\r\n  const { username } = req.user;\r\n\r\n  if (username !== 'admin') return res.sendStatus(403);\r\n  return next();\r\n};\r\n\r\nmodule.exports = { authorize, isAdmin };\n")),"\n",l.createElement(n.h1,null,l.createElement(u,null," 🍬 Test via REST Client d'une RESTful API attendant des cookies  ")),"\n",l.createElement(n.p,null,"Il nous reste à tester nos requêtes via REST Client."),"\n",l.createElement(n.p,null,"Il n'y a pas de nouvelles notions à apprendre pour utiliser REST Client avec des cookies : le comportement par défaut de REST Client, lorsqu'un cookie est renvoyé dans une réponse, est d'inclure ce cookie dans chaque requête vers la même origine."),"\n",l.createElement(n.p,null,"Dès lors, pour tester l'API, il suffit d'enlever tous les authorization headers et de rajouter une requête pour tester l'effacement d'une session."),"\n",l.createElement(n.p,null,"Veuillez tester les requêtes à l'aide de ",l.createElement(n.strong,null,"/REST Client/pizzas.http")," :"),"\n",l.createElement(n.pre,null,l.createElement(n.code,{className:"language-http"},'######### NORMAL OPERATION  ###########\r\n\r\n### Read all pizzas\r\nGET http://localhost:3000/pizzas\r\n\r\n### Read all pizzas with File variable\r\n@baseUrl = http://localhost:3000\r\nGET {{baseUrl}}/pizzas\r\n\r\n### Read all pizzas sorted by title (ascending)\r\nGET {{baseUrl}}/pizzas/?order=+title\r\n\r\n### Read all pizzas sorted by title (descending)\r\nGET {{baseUrl}}/pizzas/?order=-title\r\n\r\n### Read pizza identified by 2\r\nGET {{baseUrl}}/pizzas/2\r\n\r\n### Create a pizza by using the admin account\r\n#### First login as the admin\r\nPOST {{baseUrl}}/auths/login\r\nContent-Type: application/json\r\n\r\n{\r\n    "username":"admin",\r\n    "password":"admin"\r\n}\r\n\r\n#### Create a pizza with the admin token\r\nPOST {{baseUrl}}/pizzas\r\nContent-Type: application/json\r\n\r\n{\r\n    "title":"Magic Green",\r\n    "content":"Epinards, Brocolis, Olives vertes, Basilic"\r\n}\r\n\r\n### Delete pizza identified by 2 with the admin token\r\nDELETE {{baseUrl}}/pizzas/2\r\n\r\n### Update the pizza identified by 6 with the admin token\r\nPATCH {{baseUrl}}/pizzas/6\r\nContent-Type: application/json\r\n\r\n{\r\n    "title":"Magic Green 2"\r\n}\r\n\r\n\r\n######### ERROR OPERATION  ###########\r\n\r\n### 1. Create a pizza without a token\r\nPOST {{baseUrl}}/pizzas\r\nContent-Type: application/json\r\n\r\n{\r\n    "title":"Magic Green",\r\n    "content":"Epinards, Brocolis, Olives vertes, Basilic"\r\n}\r\n\r\n### 2. Create a pizza without being the admin, use manager account\r\n#### 2.1 First login as the manager\r\nPOST {{baseUrl}}/auths/login\r\nContent-Type: application/json\r\n\r\n{\r\n    "username":"manager",\r\n    "password":"manager"\r\n}\r\n\r\n#### 2.2 Try to create a pizza with the manager token\r\nPOST {{baseUrl}}/pizzas\r\nContent-Type: application/json\r\n\r\n{\r\n    "title":"Magic Green",\r\n    "content":"Epinards, Brocolis, Olives vertes, Basilic"\r\n}\r\n\r\n### Read pizza which does not exists\r\nGET {{baseUrl}}/pizzas/100\r\n\r\n### Create a pizza which lacks a property\r\nPOST {{baseUrl}}/pizzas\r\nContent-Type: application/json\r\n\r\n{\r\n    "content":"Epinards, Brocolis, Olives vertes, Basilic"\r\n}\r\n\r\n### Create a pizza without info for a property\r\nPOST {{baseUrl}}/pizzas\r\nContent-Type: application/json\r\n\r\n{\r\n    "title":"",\r\n    "content":"Epinards, Brocolis, Olives vertes, Basilic"\r\n}\r\n\r\n### Update for a pizza which does not exist\r\nPATCH {{baseUrl}}/pizzas/200\r\nContent-Type: application/json\r\n\r\n{\r\n    "title":"Magic Green 2"\r\n}\r\n\r\n### Update for a pizza which does not provide any info for a property\r\nPATCH {{baseUrl}}/pizzas/1\r\n\r\nContent-Type: application/json\r\n\r\n{\r\n    "title":"Magic Green 2",\r\n    "content":""\r\n}\n')),"\n",l.createElement(n.p,null,l.createElement(n.strong,null,"/REST Client/auths.http")," a été mis à jour pour tester ",l.createElement(n.strong,null,"GET /auths/logout")," :"),"\n",l.createElement(n.pre,null,l.createElement(n.code,{className:"language-http"},"### Logout any user\r\nGET {{baseUrl}}/auths/logout\n")),"\n",l.createElement(n.p,null,"Pour ajouter une pizza, il suffit juste :"),"\n",l.createElement(n.ol,null,"\n",l.createElement(n.li,null,"De loguer l'admin."),"\n",l.createElement(n.li,null,"De créer une nouvelle pizza ; le cookie est automatiquement envoyé."),"\n"),"\n",l.createElement(n.p,null,"Admettons que vous souhaitez tester l'ajout d'une pizza sans envoyer de token :"),"\n",l.createElement(n.ol,null,"\n",l.createElement(n.li,null,"Lancez l'opération de logout (GET /auths/logout) ; le cookie renvoyé ne contient pas de données de session ;"),"\n",l.createElement(n.li,null,"Tentez la création d'une pizza qui renverra un code ",l.createElement(n.strong,null,"401 Unauthorized"),"."),"\n"),"\n",l.createElement(n.p,null,"Si tout fonctionne bien, faites un ",l.createElement(n.strong,null,"commit")," de votre repo (",l.createElement(n.strong,null,"web2"),') avec le message\r\n"',l.createElement(n.strong,null,"cookies api"),'".'),"\n",l.createElement(n.p,null,"En cas de souci, vous pouvez utiliser le code du tutoriel ",l.createElement(n.a,{href:"https://github.com/e-vinci/js-demos/tree/main/backend-restful-api/restful-api-essentials/cookies"},"cookies"),"."),"\n",l.createElement(n.h2,null,"Gestion de session côté client via une IHM et des cookies"),"\n",l.createElement(n.p,null,"A présent que notre API ",l.createElement(n.strong,null,"cookies")," renvoie les données de session dans un cookie non accessible par du JS, nous souhaitons mettre à jour notre IHM pour utiliser cette API."),"\n",l.createElement(n.p,null,"Nous allons repartir de la dernière version de notre frontend."),"\n",l.createElement(n.p,null,"Au sein de votre repo ",l.createElement(n.strong,null,"web2"),", veuillez créer le projet nommé ",l.createElement(n.strong,null,"/web2/tutorials/pizzeria/hmi/cookies")," sur base d'un copié collé de ",l.createElement(n.strong,null,"/web2/tutorials/pizzeria/hmi/web-storage")," (ou ",l.createElement(n.a,{href:"https://github.com/e-vinci/js-demos/tree/main/frontend/frontend-essentials/web-storage"},"web-storage"),")."),"\n",l.createElement(n.p,null,"Pour la suite du tutoriel, nous considérons que tous les chemins absolus démarrent du répertoire\r\n",l.createElement(n.strong,null,"/web2/tutorials/pizzeria/hmi/cookies"),"."),"\n",l.createElement(n.p,null,"Afin de sauvegarder les données de session, c'est à dire l'objet ",l.createElement(n.strong,null,"authenticatedUser")," contenant juste un username, nous ne devons même pas mettre à jour le fichier ",l.createElement(n.strong,null,"/usr/utils/auths.js"),". En effet, l'API ",l.createElement(n.strong,null,"cookies")," renvoie un objet du genre ",l.createElement(n.code,null,'{username: "manager"}'),". Au niveau de l'IHM, le code est donc toujours fonctionnel pour sauvegarder le username grâce à ",l.createElement(n.code,null,"authenticatedUser"),"."),"\n",l.createElement(n.p,null,"Il ne reste donc qu'à changer le code où nous avons besoin d'une autorisation. Pour l'application de gestion de la pizzeria, il s'agit de la création de pizza.",l.createElement(n.br),"\n","Veuillez donc mettre à jour ",l.createElement(n.strong,null,"/src/Components/AddPizzaPage.js")," en enlevant ces deux lignes :"),"\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,"l'authenticatedUser : ",l.createElement(n.code,null,"const authenticatedUser = getAuthenticatedUser();")," et l'import associé (",l.createElement(n.code,null,"import { getAuthenticatedUser } from '../../utils/auths';"),"),"),"\n",l.createElement(n.li,null,"la ligne s'occupant de l'authorization header : ",l.createElement(n.code,null,"Authorization: authenticatedUser.token"),"."),"\n"),"\n",l.createElement(n.p,null,"Veuillez tester votre dernière version du frontend.\r\nLoguez-vous avec l'utilisateur ",l.createElement(n.strong,null,"admin")," (et le password ",l.createElement(n.strong,null,"admin"),").",l.createElement(n.br),"\n","Ajoutez une pizza et vérifiez qu'elle s'affiche bien."),"\n",l.createElement(n.p,null,"💭 Comment vérifier le cookie ?",l.createElement(n.br),"\n","Tout en ayant la fenêtre de votre application ouverte, via Chrome, allez dans vos outils de développeurs : ",l.createElement(n.strong,null,"F12"),".",l.createElement(n.br),"\n","Puis, dans l'onglet ",l.createElement(n.strong,null,"Application"),", cliquez sur ",l.createElement(n.strong,null,"Cookies"),", vous verrez apparaître ",l.createElement(n.code,null,"http://localhost:8080"),". Cliquez sur cette URL, et vous verrez vos 2 cookies de session, ",l.createElement(n.strong,null,"user.sig")," et ",l.createElement(n.strong,null,"user"),".",l.createElement(n.br),"\n","N'hésitez pas à aller décoder la valeur du cookie ",l.createElement(n.strong,null,"user")," sur ",l.createElement(n.a,{href:"https://www.base64decode.org/"},"base64decode")," en faisant un copier / coller de ",l.createElement(n.strong,null,"Value"),". Vous devriez voir quelque chose apparaître du style ",l.createElement(n.code,null,'{"username":"manager","token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6Im1hbmFnZXIiLCJpYXQiOjE2NjE3NzUxMDgsImV4cCI6MTc0ODE3NTEwOH0.sAZqq6vbrjCCZZoLH-n8hJKBoXJJJ8jEoupk8xKu5WI"}'),"  !"),"\n",l.createElement(n.p,null,"Toujours dans l'onglet ",l.createElement(n.strong,null,"Application")," des outils de développeurs de Chrome, faites un clear des cookies : clic droit sur ",l.createElement(n.code,null,"http://localhost:8080"),", ",l.createElement(n.strong,null,"Clear"),".",l.createElement(n.br),"\n","Tentez maintenant d'ajouter une pizza... Ca ne fonctionne plus, et c'est bien normal, car il n'y a plus de token qui est envoyé à l'API !"),"\n",l.createElement(n.p,null,"Suite à ces tests, si tout fonctionne bien, faites un ",l.createElement(n.strong,null,"commit")," de votre repo (",l.createElement(n.strong,null,"web2"),') avec le message "',l.createElement(n.strong,null,"cookies hmi"),'".'),"\n",l.createElement(n.p,null,"En cas de souci, vous pouvez utiliser le code du tutoriel :"),"\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,"pour le frontend : ",l.createElement(n.a,{href:"https://github.com/e-vinci/js-demos/tree/main/frontend/frontend-essentials/cookies"},"cookies"),"."),"\n",l.createElement(n.li,null,"pour l'API : ",l.createElement(n.a,{href:"https://github.com/e-vinci/js-demos/tree/main/backend-restful-api/restful-api-essentials/cookies"},"cookies"),"."),"\n"),"\n",l.createElement(n.p,null,"💭 Notons que cette version de notre frontend pourrait être améliorée. Actuellement, lorsqu'on fait un logout, on n'efface pas le cookie du browser.",l.createElement(n.br),"\n","Comment feriez vous ? Vous pourriez par exemple appeler la méthode ",l.createElement(n.strong,null,"GET /auths/logout")," 😉."),"\n",l.createElement(n.h1,null,l.createElement(u,null," Exercice 2.14 : Persistance de la session de myMovies dans le web storage  ")),"\n",l.createElement(n.p,null,"Lors de l'exercice précédent (Exercice 7.2), vous avez développé une application qui permet de bien gérer des films, à l'exception du fait que quand vous fermez votre browser, vous devez à chaque fois vous reconnecter."),"\n",l.createElement(n.p,null,"Veuillez faire en sorte que vos données de session soient sauvegardées :"),"\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,"dans le ",l.createElement(n.strong,null,"localStorage"),' si l\'on clique sur une checkbox "Remember me" du login ou du register.'),"\n",l.createElement(n.li,null,"dans le ",l.createElement(n.strong,null,"sessionStorage"),' si l\'on ne clique pas sur la checkbox "Remember me" lors du login ou du register.'),"\n"),"\n",l.createElement(n.p,null,"Afin de réaliser cet exercice, voici les contraintes d'implémentation :"),"\n",l.createElement(n.ul,null,"\n",l.createElement(n.li,null,"Veuillez démarrer votre API développée précédemment : ",l.createElement(n.strong,null,"/exercises/module7/7.2/api"),"."),"\n",l.createElement(n.li,null,"Pour le frontend, utilisez le contenu de votre répertoire d'exercices ",l.createElement(n.strong,null,"/exercises/module7/7.1/hmi")," comme point de départ pour créer, dans votre repository local et\r\nvotre web repository (normalement appelé ",l.createElement(n.strong,null,"web2"),"), le répertoire nommé\r\n",l.createElement(n.strong,null,"/exercises/module8/8.1/hmi"),"."),"\n",l.createElement(n.li,null,"Veuillez utiliser le proxy de votre frontend afin de contourner les problèmes associé à la gestion des CORS."),"\n"),"\n",l.createElement(n.h4,null,"🤝 Tips"),"\n",l.createElement(n.p,null,"Cet exercice est l'application du tutoriel vu dans ce module-ci. N'hésitez pas donc à rejouer les étapes vues dans le tutoriel au niveau de votre API : ",l.createElement(n.a,{href:"#a2"},"a.2) Persistance de données de sessions via le web storage"),"."),"\n",l.createElement(n.p,null,"Nous vous recommandons, dans un premier temps, de gérer les sessions dans le localStorage, sans ajouter la fonctionnalité ",l.createElement(n.strong,null,"Remember me"),".",l.createElement(n.br),"\n","Une fois que c'est fonctionnel, il sera temps de gérer le ",l.createElement(n.strong,null,"Remember me"),"."),"\n",l.createElement(n.p,null,"Vous allez pouvoir refaire un peu de gestion d'événements pour détecter les clics sur une checkbox. N'hésitez pas à voir ce que propose ",l.createElement(n.strong,null,"Bootstrap 5")," pour les ",l.createElement(n.strong,null,"checkboxes"),"."),"\n",l.createElement(n.p,null,"💭 Prenez un moment pour voir comment gérer la persistance de l'info 'Remember me'...",l.createElement(n.br),"\n","Est-ce que ce n'est pas une donnée de session qui doit persister lorsque l'utilisateur ferme son browser ?",l.createElement(n.br),"\n","En effet, point de vue ergonomie, il est intéressant que le dernier choix de l'utilisateur soit toujours présenté. La checkbox devrait donc rester ",l.createElement(n.strong,null,"checked")," ou pas, tant que l'utilisateur ne change pas son état, via un clic, ou via un Logout ; et cet état doit subsister aux travers des connexions (ouvertures / fermetures du browser)."),"\n",l.createElement(n.p,null,"Si vous gérez bien l'info 'Remember me' au travers des sessions, vous devriez facilement décider si les données de ",l.createElement(n.strong,null,"authenticatedUser")," sont à sauvegarder dans le localStorage ou le sessionStorage."),"\n",l.createElement(n.p,null,"Veuillez faire un ",l.createElement(n.strong,null,"commit"),' de votre code avec le message suivant :\r\n"',l.createElement(n.strong,null,"myMovies : module 8 : web storage"),'"".'),"\n",l.createElement(n.p,null,"NB : Le code de vos applications se trouve dans votre repository local et\r\nvotre web repository (normalement appelé ",l.createElement(n.strong,null,"web2"),") dans le répertoire nommé\r\n",l.createElement(n.strong,null,"/exercises/module8/8.1/hmi"),"."))}var a=function(e){void 0===e&&(e={});const{wrapper:n}=Object.assign({},(0,r.ah)(),e.components);return n?l.createElement(n,e,l.createElement(s,e)):s(e)};function o(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}var i=t(4854),u=t(5583),c=t(5679),m=t(307),d=t(7410),p=t(9523),E=t(8075),g=t(9063),v=t(1631),h=t(5772),f=t(2770),b=t(7008),z=t(9771),k=t(1218),q=(t(5258),t(9394)),w=t(4579),S=t(9416),j=t(9256),I=t(6488),y=t(5175),U=t(6387),P=t(6044);const A={Link:i.Link,Image:c.Z,Section:m.Z,Content:d.Z,Background:p.Z,SectionHeader:E.Z,SectionFooter:g.Z,PageHeader:v.Z,CodeBlock:f.Z,LinkFile:b.Z,ScrollableImage:z.Z,PublicProjectsView:k.Z,AuthenticatedBlock:q.Z,UnAuthenticatedBlock:w.Z,NestedMdxBlock:S.Z,YoutubeImage:j.Z,InternalPageMenu:I.Z,InternalPageMenuItem:y.Z,InternalPageTitle:U.Z,PathViewer:P.k,PathViewerItem:P.F};function x(e){var n,t,s,a,o;let{data:{mdx:i,allImages:c},children:m}=e;return A.PageHeader=(0,h.u)(v.Z,null==i?void 0:i.frontmatter),l.createElement(u.Z,Object.assign({},null!=i&&i.frontmatter?{frontmatter:i.frontmatter}:{},null!=i&&null!==(n=i.frontmatter)&&void 0!==n&&n.navbarExtraStyles?{navbarExtraStyles:i.frontmatter.navbarExtraStyles}:{},null!=i&&null!==(t=i.frontmatter)&&void 0!==t&&t.headerImage?{headerImage:i.frontmatter.headerImage}:{},null!=i&&null!==(s=i.frontmatter)&&void 0!==s&&s.featuredImage?{featuredImage:i.frontmatter.featuredImage}:{},null!=i&&null!==(a=i.frontmatter)&&void 0!==a&&a.title?{pageTitle:i.frontmatter.title}:{},c&&c.length>0?{allImages:c}:{}),l.createElement(r.Zo,{components:A},l.createElement("div",{className:null!=i&&null!==(o=i.frontmatter)&&void 0!==o&&o.autoMargin?"page page--auto-margin":"page"},m)))}function T(e){return l.createElement(x,e,l.createElement(a,e))}}}]);
//# sourceMappingURL=component---src-templates-mdx-pages-js-content-file-path-src-mdx-pages-part-2-sessions-fr-mdx-ad759356a308a3ef2c9e.js.map