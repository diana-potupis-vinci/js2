"use strict";(self.webpackChunkmyjscourse=self.webpackChunkmyjscourse||[]).push([[836],{2812:function(e,n,t){t.r(n),t.d(n,{default:function(){return U}});var r=t(3905),a=t(7294);function l(e){const n=Object.assign({h1:"h1",p:"p",br:"br",strong:"strong",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td",a:"a",pre:"pre",code:"code",ul:"ul",li:"li",h5:"h5",h4:"h4"},(0,r.ah)(),e.components),{PathViewer:t,PathViewerItem:l,InternalPageMenu:s,InternalPageMenuItem:u,InternalPageTitle:i}=n;return s||o("InternalPageMenu",!0),u||o("InternalPageMenuItem",!0),i||o("InternalPageTitle",!0),t||o("PathViewer",!0),l||o("PathViewerItem",!0),a.createElement(a.Fragment,null,a.createElement(t,null,a.createElement(l,{to:"/"}," web2course "),a.createElement(l,{to:"/part4"}," Partie 4 "),a.createElement(l,{selected:!0}," b) HMI & JWT ")),"\n",a.createElement(n.h1,null,"b) Authentification & utilisation d'op√©rations prot√©g√©es par JWT au sein d'une IHM"),"\n",a.createElement(s,null,a.createElement(u,null," Authentification d'un utilisateur via une IHM & JWT "),a.createElement(u,null," Autorisation de l'appel √† une op√©ration prot√©g√©e "),a.createElement(u,null," Probl√®mes de s√©curit√© "),a.createElement(u,null," Exercice 4.2 : Authentification & autorisation au sein de myMovies ")),"\n",a.createElement(n.h1,null,a.createElement(i,null," Authentification d'un utilisateur via une IHM & JWT ")),"\n",a.createElement(n.p,null,"Pour authentifier un utilisateur via une IHM, il suffit de faire une requ√™te √† une RESTful API."),"\n",a.createElement(n.p,null,"G√©n√©ralement, l'utilisateur devra d'abord cr√©er son compte. Il utilisera un formulaire demandant au minimum un identifiant (username, adresse e-mail ou autres) et un password.",a.createElement(n.br),"\n","Dans le cadre d'une SPA, l'IHM fera appel √† une op√©ration de type ",a.createElement(n.strong,null,"register")," lorsque l'utilisateur soumet le formulaire."),"\n",a.createElement(n.p,null,"Par la suite, lorsque le compte de l'utilisateur existe, l'IHM fera appel √† une op√©ration de type ",a.createElement(n.strong,null,"login")," lorsque l'utilisateur tentera de se connecter √† l'aide d'un formulaire."),"\n",a.createElement(n.p,null,"Dans les deux cas, ",a.createElement(n.strong,null,"register")," ou ",a.createElement(n.strong,null,"login"),", le d√©veloppeur devra conna√Ætre les op√©rations mises √† disposition par l'API."),"\n",a.createElement(n.p,null,"Dans le cadre du site de la pizzeria, nous savons que l'API met √† disposition ces deux op√©rations :"),"\n",a.createElement(n.table,null,a.createElement(n.thead,null,a.createElement(n.tr,null,a.createElement(n.th,null,"URI"),a.createElement(n.th,null,"M√©thode HTTP"),a.createElement(n.th,null,"Op√©ration"))),a.createElement(n.tbody,null,a.createElement(n.tr,null,a.createElement(n.td,null,a.createElement(n.strong,null,"auths/login")),a.createElement(n.td,null,"POST"),a.createElement(n.td,null,'V√©rifier les credentials d\'une ressource de type "users" et renvoyer le username et un token JWT si les credentials sont OK')),a.createElement(n.tr,null,a.createElement(n.td,null,a.createElement(n.strong,null,"auths/register")),a.createElement(n.td,null,"POST"),a.createElement(n.td,null,'Cr√©er une ressource de type "users" et renvoyer le username et un token JWT')))),"\n",a.createElement("br"),"\n",a.createElement(n.p,null,"Veuillez d√©marrer la derni√®re version de la RESTful API de la pizzeria. En cas de souci, vous pouvez utiliser ce code-ci :\r\n",a.createElement(n.a,{href:"https://github.com/e-vinci/js-demos/tree/main/backend-restful-api/restful-api-essentials/auths"},"auths"),"."),"\n",a.createElement(n.p,null,"Nous allons maintenant continuer le d√©veloppement de l'IHM ",a.createElement(n.a,{href:"https://github.com/e-vinci/js-demos/tree/main/frontend/frontend-essentials/async-await"},"async-await")," pour que le formulaire de register et de login fassent appelle √† l'API et sauve temporairement le token renvoy√©."),"\n",a.createElement(n.p,null,"Au sein de votre repo ",a.createElement(n.strong,null,"web2"),", veuillez cr√©er le projet nomm√© ",a.createElement(n.strong,null,"/web2/tutorials/pizzeria/hmi/jwt-fetch")," sur base d'un copi√© coll√© de ",a.createElement(n.strong,null,"/web2/tutorials/pizzeria/hmi/async-await")," (ou ",a.createElement(n.a,{href:"https://github.com/e-vinci/js-demos/tree/main/frontend/frontend-essentials/basic-fetch"},"async-await"),")."),"\n",a.createElement(n.p,null,"Pour la suite du tutoriel, nous consid√©rons que tous les chemins absolus d√©marrent du r√©pertoire\r\n",a.createElement(n.strong,null,"/web2/tutorials/pizzeria/hmi/jwt-fetch"),"."),"\n",a.createElement(n.p,null,"Veuillez mettre √† jour le code de la ",a.createElement(n.strong,null,"RegisterPage")," afin de faire appel √† la m√©thode ",a.createElement(n.strong,null,"POST /auths/register")," et, si tout est OK, renvoyer l'utilisateur vers la ",a.createElement(n.strong,null,"HomePage")," via la fonction ",a.createElement(n.strong,null,"Navigate")," :"),"\n",a.createElement(n.pre,{numbered:!0,highlighting:"2,34-63"},a.createElement(n.code,{className:"language-js"},"import { clearPage, renderPageTitle } from '../../utils/render';\r\nimport Navigate from '../Router/Navigate';\r\n\r\nconst RegisterPage = () => {\r\n  clearPage();\r\n  renderPageTitle('Register');\r\n  renderRegisterForm();\r\n};\r\n\r\nfunction renderRegisterForm() {\r\n  const main = document.querySelector('main');\r\n  const form = document.createElement('form');\r\n  form.className = 'p-5';\r\n  const username = document.createElement('input');\r\n  username.type = 'text';\r\n  username.id = 'username';\r\n  username.placeholder = 'username';\r\n  username.required = true;\r\n  username.className = 'form-control mb-3';\r\n  const password = document.createElement('input');\r\n  password.type = 'password';\r\n  password.id = 'password';\r\n  password.required = true;\r\n  password.placeholder = 'password';\r\n  password.className = 'form-control mb-3';\r\n  const submit = document.createElement('input');\r\n  submit.value = 'Register';\r\n  submit.type = 'submit';\r\n  submit.className = 'btn btn-danger';\r\n  form.appendChild(username);\r\n  form.appendChild(password);\r\n  form.appendChild(submit);\r\n  main.appendChild(form);\r\n  form.addEventListener('submit', onRegister);\r\n}\r\n\r\nasync function onRegister(e) {\r\n  e.preventDefault();\r\n\r\n  const username = document.querySelector('#username').value;\r\n  const password = document.querySelector('#password').value;\r\n\r\n  const options = {\r\n    method: 'POST',\r\n    body: JSON.stringify({\r\n      username,\r\n      password,\r\n    }),\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n  };\r\n\r\n  const response = await fetch('/api/auths/register', options);\r\n\r\n  if (!response.ok) throw new Error(`fetch error : ${response.status} : ${response.statusText}`);\r\n\r\n  const authenticatedUser = await response.json();\r\n\r\n  console.log('Newly registered & authenticated user : ', authenticatedUser);\r\n\r\n  Navigate('/');\r\n}\r\n\r\nexport default RegisterPage;\r\n\n")),"\n",a.createElement(n.p,null,"Veuillez ex√©cuter le frontend et vous assurer que l'utilisateur que vous tentez de cr√©er est bien cr√©√© par votre API. Si tout fonctionne, vous aurez une confirmation dans la console de votre browser."),"\n",a.createElement(n.p,null,"Bien, nous souhaitons pour l'instant sauvegarder ",a.createElement(n.strong,null,"authenticatedUser")," de mani√®re temporaire, car cet objet contient comme info le username et le token de l'utilisateur."),"\n",a.createElement(n.p,null,"üí≠ Comment faire pour que cet objet soit disponible dans d'autres modules ?\r\nCette question nous permet d'explorer un propri√©t√© importante des ",a.createElement(n.strong,null,"export")," d'objets via ECMAScript : ce sont des objets immuables, c'est-√†-dire dont vous ne pouvez pas directement changer leurs valeurs. Comment faire alors pour offrir ",a.createElement(n.strong,null,"authenticatedUser")," ?",a.createElement(n.br),"\n","Nous allons offrir quatre nouvelles fonctions :"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"une fonction qui renverra l'√©tat d'une variable ",a.createElement(n.strong,null,"authenticatedUser")," ;"),"\n",a.createElement(n.li,null,"une fonction qui permettra de modifier la variable ",a.createElement(n.strong,null,"authenticatedUser")," ;"),"\n",a.createElement(n.li,null,"une fonction qui indiquera si l'utilisateur est authentifi√© ou pas ;"),"\n",a.createElement(n.li,null,"une fonction qui permettra de faire un reset de l'utilisateur en cours (on utilisera cette fonction lors d'un logout)."),"\n"),"\n",a.createElement(n.p,null,"Veuillez cr√©er le fichier ",a.createElement(n.strong,null,"/src/utils/auths.js")," et y ajouter le code suivant :"),"\n",a.createElement(n.pre,{numbered:!0},a.createElement(n.code,{className:"language-js"},"let currentUser;\r\n\r\nconst getAuthenticatedUser = () => currentUser;\r\n\r\nconst setAuthenticatedUser = (authenticatedUser) => {\r\n  currentUser = authenticatedUser;\r\n};\r\n\r\nconst isAuthenticated = () => currentUser !== undefined;\r\n\r\nconst clearAuthenticatedUser = () => {\r\n  currentUser = undefined;\r\n};\r\n\r\n// eslint-disable-next-line object-curly-newline\r\nexport { getAuthenticatedUser, setAuthenticatedUser, isAuthenticated, clearAuthenticatedUser };\n")),"\n",a.createElement(n.p,null,"Veuillez mettre √† jour le code de la ",a.createElement(n.strong,null,"RegisterPage")," afin de sauver en m√©moire vive l'utilisateur authentifi√©. Nous allons aussi pr√©parer la suite afin d'avoir une Navbar qui s'adaptera lorsqu'un utilisateur est authentifi√©, c'est pourquoi nous allons appeler le composant ",a.createElement(n.strong,null,"Navbar")," :"),"\n",a.createElement(n.pre,{numbered:!0,highlighting:"1,3,66,68"},a.createElement(n.code,{className:"language-js"},"import { setAuthenticatedUser } from '../../utils/auths';\r\nimport { clearPage, renderPageTitle } from '../../utils/render';\r\nimport Navbar from '../Navbar/Navbar';\r\nimport Navigate from '../Router/Navigate';\r\n\r\nconst RegisterPage = () => {\r\n  clearPage();\r\n  renderPageTitle('Register');\r\n  renderRegisterForm();\r\n};\r\n\r\nfunction renderRegisterForm() {\r\n  const main = document.querySelector('main');\r\n  const form = document.createElement('form');\r\n  form.className = 'p-5';\r\n  const username = document.createElement('input');\r\n  username.type = 'text';\r\n  username.id = 'username';\r\n  username.placeholder = 'username';\r\n  username.required = true;\r\n  username.className = 'form-control mb-3';\r\n  const password = document.createElement('input');\r\n  password.type = 'password';\r\n  password.id = 'password';\r\n  password.required = true;\r\n  password.placeholder = 'password';\r\n  password.className = 'form-control mb-3';\r\n  const submit = document.createElement('input');\r\n  submit.value = 'Register';\r\n  submit.type = 'submit';\r\n  submit.className = 'btn btn-danger';\r\n  form.appendChild(username);\r\n  form.appendChild(password);\r\n  form.appendChild(submit);\r\n  main.appendChild(form);\r\n  form.addEventListener('submit', onRegister);\r\n}\r\n\r\nasync function onRegister(e) {\r\n  e.preventDefault();\r\n\r\n  const username = document.querySelector('#username').value;\r\n  const password = document.querySelector('#password').value;\r\n\r\n  const options = {\r\n    method: 'POST',\r\n    body: JSON.stringify({\r\n      username,\r\n      password,\r\n    }),\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n  };\r\n\r\n  const response = await fetch('/api/auths/register', options);\r\n\r\n  if (!response.ok) throw new Error(`fetch error : ${response.status} : ${response.statusText}`);\r\n\r\n  const authenticatedUser = await response.json();\r\n\r\n  console.log('Newly registered & authenticated user : ', authenticatedUser);\r\n\r\n  setAuthenticatedUser(authenticatedUser);\r\n\r\n  Navbar();\r\n\r\n  Navigate('/');\r\n}\r\n\r\nexport default RegisterPage;\n")),"\n",a.createElement(n.p,null,"Pour la ",a.createElement(n.strong,null,"LoginPage"),", les modifications √† faire sont les m√™mes :"),"\n",a.createElement(n.pre,{numbered:!0,highlighting:"1,3-4,36-69"},a.createElement(n.code,{className:"language-js"},"import { setAuthenticatedUser } from '../../utils/auths';\r\nimport { clearPage, renderPageTitle } from '../../utils/render';\r\nimport Navbar from '../Navbar/Navbar';\r\nimport Navigate from '../Router/Navigate';\r\n\r\nconst LoginPage = () => {\r\n  clearPage();\r\n  renderPageTitle('Login');\r\n  renderRegisterForm();\r\n};\r\n\r\nfunction renderRegisterForm() {\r\n  const main = document.querySelector('main');\r\n  const form = document.createElement('form');\r\n  form.className = 'p-5';\r\n  const username = document.createElement('input');\r\n  username.type = 'text';\r\n  username.id = 'username';\r\n  username.placeholder = 'username';\r\n  username.required = true;\r\n  username.className = 'form-control mb-3';\r\n  const password = document.createElement('input');\r\n  password.type = 'password';\r\n  password.id = 'password';\r\n  password.required = true;\r\n  password.placeholder = 'password';\r\n  password.className = 'form-control mb-3';\r\n  const submit = document.createElement('input');\r\n  submit.value = 'Login';\r\n  submit.type = 'submit';\r\n  submit.className = 'btn btn-danger';\r\n  form.appendChild(username);\r\n  form.appendChild(password);\r\n  form.appendChild(submit);\r\n  main.appendChild(form);\r\n  form.addEventListener('submit', onLogin);\r\n}\r\n\r\nasync function onLogin(e) {\r\n  e.preventDefault();\r\n\r\n  const username = document.querySelector('#username').value;\r\n  const password = document.querySelector('#password').value;\r\n\r\n  const options = {\r\n    method: 'POST',\r\n    body: JSON.stringify({\r\n      username,\r\n      password,\r\n    }),\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n  };\r\n\r\n  const response = await fetch('/api/auths/login', options);\r\n\r\n  if (!response.ok) throw new Error(`fetch error : ${response.status} : ${response.statusText}`);\r\n\r\n  const authenticatedUser = await response.json();\r\n\r\n  console.log('Authenticated user : ', authenticatedUser);\r\n\r\n  setAuthenticatedUser(authenticatedUser);\r\n\r\n  Navbar();\r\n\r\n  Navigate('/');\r\n}\r\n\r\nexport default LoginPage;\n")),"\n",a.createElement(n.p,null,"Nous souhaitons maintenant faire en sorte que la Navbar affiche des √©l√©ments diff√©rents si l'utilisateur est authentifi√© au pas :"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"s'il est authentifi√© : on affiche ",a.createElement(n.strong,null,"Home"),", ",a.createElement(n.strong,null,"Login"),", ",a.createElement(n.strong,null,"Register")," et le ",a.createElement(n.strong,null,"username")," de l'utilisateur connect√©."),"\n",a.createElement(n.li,null,"s'il est anonyme : on affiche ",a.createElement(n.strong,null,"Home"),", ",a.createElement(n.strong,null,"Add a pizza"),", ",a.createElement(n.strong,null,"Logout"),"."),"\n"),"\n",a.createElement(n.p,null,"Nous allons mettre √† jour la ",a.createElement(n.strong,null,"Navbar")," pour s'adapter √† l'authentification d'un utilisateur :"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-js"},'// eslint-disable-next-line no-unused-vars\r\nimport { Navbar as BootstrapNavbar } from \'bootstrap\';\r\nimport { getAuthenticatedUser, isAuthenticated } from \'../../utils/auths\';\r\n\r\nconst Navbar = () => {\r\n  renderNavbar();\r\n};\r\n\r\nfunction renderNavbar() {\r\n  const authenticatedUser = getAuthenticatedUser();\r\n\r\n  const anonymousUserNavbar = `\r\n<nav class="navbar navbar-expand-lg navbar-light bg-danger">\r\n      <div class="container-fluid">\r\n        <a class="navbar-brand" href="#">e-Pizzeria</a>\r\n        <button\r\n          class="navbar-toggler"\r\n          type="button"\r\n          data-bs-toggle="collapse"\r\n          data-bs-target="#navbarSupportedContent"\r\n          aria-controls="navbarSupportedContent"\r\n          aria-expanded="false"\r\n          aria-label="Toggle navigation"\r\n        >\r\n          <span class="navbar-toggler-icon"></span>\r\n        </button>\r\n        <div class="collapse navbar-collapse" id="navbarSupportedContent">\r\n          <ul class="navbar-nav me-auto mb-2 mb-lg-0">\r\n            <li class="nav-item">\r\n              <a class="nav-link active" aria-current="page" href="#" data-uri="/">Home</a>\r\n            </li>\r\n            <li id="loginItem" class="nav-item">\r\n              <a class="nav-link" href="#" data-uri="/login">Login</a>\r\n            </li>\r\n            <li id="registerItem" class="nav-item">\r\n              <a class="nav-link" href="#" data-uri="/register">Register</a>\r\n            </li>            \r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </nav>\r\n`;\r\n\r\n  const authenticatedUserNavbar = `\r\n<nav class="navbar navbar-expand-lg navbar-light bg-danger">\r\n      <div class="container-fluid">\r\n        <a class="navbar-brand" href="#">e-Pizzeria</a>\r\n        <button\r\n          class="navbar-toggler"\r\n          type="button"\r\n          data-bs-toggle="collapse"\r\n          data-bs-target="#navbarSupportedContent"\r\n          aria-controls="navbarSupportedContent"\r\n          aria-expanded="false"\r\n          aria-label="Toggle navigation"\r\n        >\r\n          <span class="navbar-toggler-icon"></span>\r\n        </button>\r\n        <div class="collapse navbar-collapse" id="navbarSupportedContent">\r\n          <ul class="navbar-nav me-auto mb-2 mb-lg-0">\r\n            <li class="nav-item">\r\n              <a class="nav-link active" aria-current="page" href="#" data-uri="/">Home</a>\r\n            </li>          \r\n            <li class="nav-item">\r\n              <a class="nav-link" href="#" data-uri="/add-pizza">Add a pizza</a>\r\n            </li>\r\n            <li class="nav-item">\r\n              <a class="nav-link" href="#" data-uri="/logout">Logout</a>\r\n            </li>    \r\n            <li class="nav-item">\r\n              <a class="nav-link disabled" href="#">${authenticatedUser?.username}</a>\r\n            </li>           \r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </nav>\r\n`;\r\n\r\n  const navbar = document.querySelector(\'#navbarWrapper\');\r\n\r\n  navbar.innerHTML = isAuthenticated() ? authenticatedUserNavbar : anonymousUserNavbar;\r\n}\r\n\r\nexport default Navbar;\n')),"\n",a.createElement(n.p,null,"Ce code est quasi enti√®rement neuf. On a rajout√© l'√©l√©ment qui permettra de r√©aliser le logout d'un utilisateur. Avant d'aller plus loin, veuillez tester l'application.",a.createElement(n.br),"\n","Loguez-vous avec l'utilisateur ",a.createElement(n.strong,null,"admin")," (et le password ",a.createElement(n.strong,null,"admin"),") et v√©rifier que vous √™tes bien redirig√© vers la HomePage une fois authentifi√©, que la Navbar contient bien les √©l√©ments attendus, dont le ",a.createElement(n.strong,null,"username"),".",a.createElement(n.br),"\n","Veuillez maintenant tester un clic sur l'√©l√©ment ",a.createElement(n.strong,null,"Add a pizza")," de la Navbar. Il ne se passe rien...",a.createElement(n.br),"\n","üí≠ Pourquoi les clics ne sont plus pris en compte ?",a.createElement(n.br),"\n","En fait, regardons le code de notre ",a.createElement(n.strong,null,"Router"),", pour la gestion des clics sur la ",a.createElement(n.strong,null,"Navbar")," :"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-js"},"function onNavBarClick() {\r\n  const navItems = document.querySelectorAll('.nav-link');\r\n\r\n  navItems.forEach((item) => {\r\n    item.addEventListener('click', (e) => {\r\n      e.preventDefault();\r\n      const uri = e.target?.dataset?.uri;\r\n      const componentToRender = routes[uri];\r\n      if (!componentToRender) throw Error(`The ${uri} ressource does not exist.`);\r\n\r\n      componentToRender();\r\n      window.history.pushState({}, '', uri);\r\n    });\r\n  });\r\n}\n")),"\n",a.createElement(n.p,null,"En fait, tant dans ",a.createElement(n.strong,null,"LoginPage")," que dans ",a.createElement(n.strong,null,"RegisterPage"),", nous faisons appel √† la fonction ",a.createElement(n.strong,null,a.createElement(n.code,null,"Navbar")),' qui fait un "rerender" (r√©affichage) de la Navbar. Ainsi, tous les √©l√©ments de la barre de navigation sont "rerender", et donc comme le ',a.createElement(n.strong,null,"Router")," n'est pas r√©appel√©, la fonction ",a.createElement(n.strong,null,a.createElement(n.code,null,"onNavBarClick"))," n'est pas r√©ex√©cut√©e. Ainsi, m√™me si les nouveaux √©l√©ments de la Navbar ont la classe CSS ",a.createElement(n.strong,null,a.createElement(n.code,null,"nav-link")),", leurs √©couteurs d'√©v√©nements de type click n'existent pas."),"\n",a.createElement(n.p,null,"üí≠ Comment corriger cela ?\r\nOn pourrait se dire qu'il suffit de faire appel √† la fonction ",a.createElement(n.strong,null,a.createElement(n.code,null,"onNavBarClick"))," dans la ",a.createElement(n.strong,null,"Navbar"),". Cette solution ne fonctionnerait pas car nous aurions des d√©pendances cycliques, la Navbar devrait faire appel aux routes, qui elles font appel aux pages, les pages faisant appel √† la Navbar...",a.createElement(n.br),"\n","D√®s lors, le mieux serait de mettre un √©couteur d'√©v√©nements au niveau du wrapper de la Navbar.",a.createElement(n.br),"\n","Comme le wrapper n'est jamais r√©initialis√©, tout sera en ordre.",a.createElement(n.br),"\n","Veuillez donc mettre √† jour la fonction ",a.createElement(n.strong,null,a.createElement(n.code,null,"onNavBarClick"))," de ",a.createElement(n.strong,null,"/src/Components/Router/Router.js")," :"),"\n",a.createElement(n.pre,{highlighting:"2,4,6-8"},a.createElement(n.code,{className:"language-js"},"function onNavBarClick() {\r\n  const navbarWrapper = document.querySelector('#navbarWrapper');\r\n\r\n  navbarWrapper.addEventListener('click', (e) => {\r\n    e.preventDefault();\r\n    const navBarItemClicked = e.target;\r\n    const uri = navBarItemClicked?.dataset?.uri;\r\n    if (uri) {\r\n      const componentToRender = routes[uri];\r\n      if (!componentToRender) throw Error(`The ${uri} ressource does not exist.`);\r\n\r\n      componentToRender();\r\n      window.history.pushState({}, '', uri);\r\n    }\r\n  });\r\n}\n")),"\n",a.createElement(n.p,null,"Veuillez noter que le ",a.createElement(n.strong,null,"navbarWrapper")," est initialis√© au sein du composant ",a.createElement(n.strong,null,"Header"),".",a.createElement(n.br),"\n","Dans la nouvelle version du code du ",a.createElement(n.strong,null,"Router"),", le gestionnaire de clic est ajout√© au niveau de ce wrapper. Gr√¢ce √† l'event objet ",a.createElement(n.strong,null,a.createElement(n.code,null,"e")),", on acc√®de √† l'√©l√©ment sur lequel on a cliqu√© gr√¢ce √† la propri√©t√© ",a.createElement(n.strong,null,a.createElement(n.code,null,"target")),". On retrouve donc l'√©l√©ment de la navbar sur lequel on a cliqu√© tr√®s facilement."),"\n",a.createElement(n.p,null,"Veuillez tester votre IHM et v√©rifier qu'une fois logu√©, vous puissiez bien voyager entre les pages."),"\n",a.createElement(n.p,null,"Il reste maintenant √† cr√©er un composant permettant de faire un logout. On souhaite que ce composant de logout supprime l'utilisateur authentifi√©, r√©affiche la Navbar pour un utilisateur anonyme et redirige l'utilisateur vers la page de login."),"\n",a.createElement(n.p,null,"Pour ce faire, veuillez cr√©er le dossier et le fichier ",a.createElement(n.strong,null,"/src/Components/Logout/Logout.js")," et y ajouter ce code :"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-js"},"import { clearAuthenticatedUser } from '../../utils/auths';\r\nimport Navbar from '../Navbar/Navbar';\r\nimport Navigate from '../Router/Navigate';\r\n\r\nconst Logout = () => {\r\n  clearAuthenticatedUser();\r\n  Navbar();\r\n  Navigate('/login');\r\n};\r\n\r\nexport default Logout;\n")),"\n",a.createElement(n.p,null,"Attention, m√™me si nous avons mis √† jour la ",a.createElement(n.strong,null,"Navbar")," et cr√©√© le composant ",a.createElement(n.strong,null,"Logout"),", le boilerplate du frontend impose de rajouter une route au sein du ",a.createElement(n.strong,null,"Router")," pour qu'un clic sur l'√©l√©ment ",a.createElement(n.strong,null,"Logout")," de la ",a.createElement(n.strong,null,"Navbar")," am√®ne √† appeler le composant ",a.createElement(n.strong,null,"Logout"),".\r\nVeuillez donc mettre √† jour ",a.createElement(n.strong,null,a.createElement(n.code,null,"routes"))," au sein de ",a.createElement(n.strong,null,"/src/Components/Router/Router.js")," :"),"\n",a.createElement(n.pre,{highlighting:"1,12"},a.createElement(n.code,{className:"language-js"},"import Logout from '../Logout/Logout';\r\nimport AddPizzaPage from '../Pages/AddPizzaPage';\r\nimport HomePage from '../Pages/HomePage';\r\nimport LoginPage from '../Pages/LoginPage';\r\nimport RegisterPage from '../Pages/RegisterPage';\r\n\r\nconst routes = {\r\n  '/': HomePage,\r\n  '/login': LoginPage,\r\n  '/register': RegisterPage,\r\n  '/add-pizza': AddPizzaPage,\r\n  '/logout': Logout,\r\n};\n")),"\n",a.createElement(n.p,null,"Veuillez maintenant tester le login et le logout. Tout devrait √™tre fonctionnel !",a.createElement(n.br),"\n","Il nous reste √† faire en sorte que l'on puisse autoriser l'op√©ration de cr√©ation de pizza."),"\n",a.createElement(n.h1,null,a.createElement(i,null," Autorisation de l'appel √† une op√©ration prot√©g√©e  ")),"\n",a.createElement(n.p,null,"Nous allons maintenant voir comment, √† partir d'une IHM, nous pouvons utiliser un token pour acc√©der √† une op√©ration d'une RESTful API."),"\n",a.createElement(n.p,null,"Veuillez vous assurer que la derni√®re version de la RESTful API de la pizzeria est bien d√©marr√©e. En cas de souci, vous pouvez utiliser ce code-ci :\r\n",a.createElement(n.a,{href:"https://github.com/e-vinci/js-demos/tree/main/backend-restful-api/restful-api-essentials/auths"},"auths"),"."),"\n",a.createElement(n.p,null,"Veuillez vous connecter √† l'IHM ",a.createElement(n.strong,null,"jwt-fetch")," √† l'aide du compte ",a.createElement(n.strong,null,"manager")," et tentez d'ajouter une pizza. Cela ne devrait pas fonctionner. Veuillez regarder dans la console : il devrait y avoir une erreur qui s'affiche avec le \"status code\" ",a.createElement(n.strong,null,"401 : Unauthorized"),".",a.createElement(n.br),"\n","En effet, l'API attend un token pour autoriser l'op√©ration de cr√©ation d'une pizza."),"\n",a.createElement(n.p,null,"Nous allons donc mettre √† jour ",a.createElement(n.strong,null,"/src/Components/Pages/AddPizzaPage.js")," pour ajouter le token de l'utilisateur authentifi√© au sein du header de la requ√™te (il n'y a que trois lignes √† rajouter) :"),"\n",a.createElement(n.pre,{numbered:!0,highlighting:"1,44,54"},a.createElement(n.code,{className:"language-js"},"import { getAuthenticatedUser } from '../../utils/auths';\r\nimport { clearPage, renderPageTitle } from '../../utils/render';\r\nimport Navigate from '../Router/Navigate';\r\n\r\nconst AddPizzaPage = () => {\r\n  clearPage();\r\n  renderPageTitle('Add a pizza to the menu');\r\n  renderAddPizzaForm();\r\n};\r\n\r\nfunction renderAddPizzaForm() {\r\n  const main = document.querySelector('main');\r\n  const form = document.createElement('form');\r\n  form.className = 'p-5';\r\n  const title = document.createElement('input');\r\n  title.type = 'text';\r\n  title.id = 'title';\r\n  title.placeholder = 'title of your pizza';\r\n  title.required = true;\r\n  title.className = 'form-control mb-3';\r\n  const content = document.createElement('input');\r\n  content.type = 'text';\r\n  content.id = 'content';\r\n  content.required = true;\r\n  content.placeholder = 'Content of your pizza';\r\n  content.className = 'form-control mb-3';\r\n  const submit = document.createElement('input');\r\n  submit.value = 'Add pizza to the menu';\r\n  submit.type = 'submit';\r\n  submit.className = 'btn btn-danger';\r\n  form.appendChild(title);\r\n  form.appendChild(content);\r\n  form.appendChild(submit);\r\n  main.appendChild(form);\r\n  form.addEventListener('submit', onAddPizza);\r\n}\r\n\r\nasync function onAddPizza(e) {\r\n  e.preventDefault();\r\n\r\n  const title = document.querySelector('#title').value;\r\n  const content = document.querySelector('#content').value;\r\n\r\n  const authenticatedUser = getAuthenticatedUser();\r\n\r\n  const options = {\r\n    method: 'POST',\r\n    body: JSON.stringify({\r\n      title,\r\n      content,\r\n    }),\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      Authorization: authenticatedUser.token,\r\n    },\r\n  };\r\n\r\n  const response = await fetch('/api/pizzas', options);\r\n\r\n  if (!response.ok) throw new Error(`fetch error : ${response.status} : ${response.statusText}`);\r\n\r\n  const newPizza = await response.json();\r\n\r\n  console.log('New pizza added : ', newPizza);\r\n\r\n  Navigate('/');\r\n}\r\n\r\nexport default AddPizzaPage;\r\n\n")),"\n",a.createElement(n.p,null,"Veuillez vous connecter √† l'IHM √† l'aide du compte ",a.createElement(n.strong,null,"manager")," et tentez d'ajouter une pizza. Cela ne devrait toujours pas fonctionner. Veuillez regarder dans la console : il devrait y avoir une erreur qui s'affiche avec le \"status code\" ",a.createElement(n.strong,null,"403 : Forbidden"),".",a.createElement(n.br),"\n","En effet, l'API attend un token pour autoriser l'op√©ration de cr√©ation d'une pizza, mais seulement ",a.createElement(n.strong,null,"admin")," a le privil√®ge d'ajouter une pizza au menu !"),"\n",a.createElement(n.p,null,"D√©connectez-vous (logout), reconnectez-vous √† l'aide du compte ",a.createElement(n.strong,null,"admin"),", et ajoutez une pizza.\r\nVoila ! Le site devrait √™tre enti√®rement fonctionnel !"),"\n",a.createElement(n.p,null,"Si tout fonctionne bien, faites un ",a.createElement(n.strong,null,"commit")," de votre repo (",a.createElement(n.strong,null,"web2"),') avec le message\r\n"',a.createElement(n.strong,null,"jwt-fetch"),'".'),"\n",a.createElement(n.p,null,"En cas de souci, vous pouvez utiliser le code du tutoriel :"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"pour le frontend : ",a.createElement(n.a,{href:"https://github.com/e-vinci/js-demos/tree/main/frontend/frontend-essentials/jwt-fetch"},"jwt-fetch"),"."),"\n",a.createElement(n.li,null,"pour l'API : ",a.createElement(n.a,{href:"https://github.com/e-vinci/js-demos/tree/main/backend-restful-api/restful-api-essentials/auths"},"auths"),"."),"\n"),"\n",a.createElement(n.p,null,'üí≠ Est-ce que c\'est "safe" que notre IHM affiche le menu "Add a pizza" pour un utilisateur qui n\'est pas l\'admin ?',a.createElement(n.br),"\n","En fait oui, c'est \"safe\", vous l'avez test√©. L'API ne doit jamais faire confiance aux applications clientes pour appliquer la s√©curit√©. Ainsi, m√™me si le frontend autorise l'acc√®s √† des op√©rations qui ne devraient pas √™tre permises, au regard des autorisations appliqu√©es par l'API, √ßa n'a pas d'importance point de vue s√©curit√©.",a.createElement(n.br),"\n","De la m√™me fa√ßon, c'est pour √ßa qu'une API doit aussi toujours valider les param√®tres qu'elle re√ßoit. Elle ne peut pas faire confiance aux applications clientes, comme par exemple √† une application web tournant dans un browser, pour valider tous les champs d'un formulaire avant de faire la requ√™te.",a.createElement(n.br),"\n","La raison est simple, l'API est d√©velopp√©e ind√©pendamment des applications clientes, elle ne peut pas supposer que les requ√™tes seront toujours bien construites."),"\n",a.createElement(n.p,null,"üí≠ OK, tout est \"safe\" si l'API fait toutes les v√©rifications n√©cessaires. N√©anmoins, n'y a-t-il pas des r√®gles de bonnes pratiques au niveau des IHM, pour ne pas permettre de faire n'importe quelles requ√™tes vers des API ?",a.createElement(n.br),"\n","Et bien oui, au niveau des IHM, pour des questions d'",a.createElement(n.strong,null,"ergonomie"),", d'exp√©rience utilisateur, on va faire en sorte :"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"de ne pas offrir des op√©rations qui ne seront pas autoris√©es. Par exemple, dans le cadre de ce tutoriel sur un site permettant de g√©rer une pizzeria, si l'utilisateur n'est pas ",a.createElement(n.strong,null,"admin"),", alors il ne faut pas frustrer les utilisateurs en leur faisant croire qu'ils ont acc√®s √† l'op√©ration de cr√©er une pizza ! Imaginez-vous, vous cr√©er une nouvelle pizza de 32 ingr√©dients, et lors de la soumission, vous recevez un message comme quoi vous n'√™tes pas l'admin du site et que vous n'avez donc pas le droit de cr√©er une pizza üò≤!"),"\n",a.createElement(n.li,null,"de ne pas demander du travail √† une API quand l'IHM peut d√©tecter que ce n'est pas utile.\r\nAinsi, quand une IHM offre des formulaires, qui am√®neront √† des requ√™tes vers des API, on √©vitera d'autoriser la soumission des donn√©es tant que les champs n'ont pas √©t√© valid√©s. Tout ce que l'IHM peut valider c√¥t√© client, elle doit le faire. Le feedback sera plus rapide pour l'utilisateur, et les ressources de l'API seront √©conomis√©es (pas d'appel inutile)."),"\n"),"\n",a.createElement(n.p,null,"N'h√©sitez donc pas √† mettre √† jour ce tutoriel pour faire en sorte de n'afficher \"Add a pizza\" que si l'utilisateur est ",a.createElement(n.strong,null,"admin"),"."),"\n",a.createElement(n.p,null,"üí≠ Ca n'est pas un peu \"cheap\" que seul l'utilisateur ",a.createElement(n.strong,null,"admin")," puisse avoir le privil√®ge d'administrateur du site ?",a.createElement(n.br),"\n","H√© bien oui, c'est \"cheap\". G√©n√©ralement, dans le cadre d'applications plus robustes, nous allons ajouter un ou plusieurs r√¥les aux utilisateurs. Par exemple, dans le cadre d'applications o√π les r√¥les sont simples, qu'il n'y a jamais qu'un seul r√¥le associ√© √† un utilisateur, il suffirait d'ajouter au niveau de l'API la propri√©t√© ",a.createElement(n.strong,null,"role")," aux utilisateurs. Par exemple, la majorit√© des utilisateurs pourrait avoir un r√¥le dont la valeur serait ",a.createElement(n.strong,null,"default"),", et une minorit√© d'utilisateur auraient le r√¥le d'",a.createElement(n.strong,null,"admin"),"..."),"\n",a.createElement(n.p,null,"On n'affiche actuellement ",a.createElement(n.strong,null,"pas de message d'erreur")," √† l'utilisateur lorsque la r√©ponse d'une API renvoie une erreur. Pour am√©liorer l'exp√©rience de l'utilisateur, ce serait une am√©lioration √† faire."),"\n",a.createElement(n.p,null,"Finalement, lorsqu'on ferme le browser et revient sur l'application par la suite, on n'est plus authentifi√©. Nous allons donc prochainement voir comment nous pourrions sauvegarder des donn√©es de session c√¥t√©-client, dans le browser."),"\n",a.createElement(n.h1,null,a.createElement(i,null," Probl√®mes de s√©curit√©  ")),"\n",a.createElement(n.p,null,"Il y a un probl√®me de s√©curit√© majeur actuellement. Nous pourrions √™tre victime d'attaques de type XSS : des injections de JS malicieux sont possibles üò® !",a.createElement(n.br),"\n","De plus, si quelqu'un a acc√®s au fichier ",a.createElement(n.strong,null,"/data/users.json")," pr√©sent sur l'API, il a acc√®s √† tous les passwords des utilisateurs en clair üò® !"),"\n",a.createElement(n.p,null,"Nous allons r√©aliser un exercice avant de traiter des probl√®mes de s√©curit√©."),"\n",a.createElement(n.h1,null,a.createElement(i,null," Exercice 4.2 : Authentification & autorisation au sein de myMovies ")),"\n",a.createElement(n.p,null,"Lors de l'exercice pr√©c√©dent (Exercice 6.2), vous aviez une application qui permettait normalement de g√©rer des films, mais qui n'√©tait pas s√©curis√©e."),"\n",a.createElement(n.p,null,"A cet exercice, veuillez introduire l'authentification d'utilisateur via ces deux nouveaux cas d'utilisation :"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"UC5 : un utilisateur doit pouvoir cr√©er un compte (register)."),"\n",a.createElement(n.li,null,"UC6 : un utilisateur doit pouvoir se loguer (login)."),"\n",a.createElement(n.li,null,"UC7 : un utilisateur doit pouvoir se d√©connecter (logout)."),"\n"),"\n",a.createElement(n.p,null,"Vous allez continuer le d√©veloppement du frontend de ",a.createElement(n.strong,null,"myMovies")," r√©alis√© au module 3 (Exercice 3.1) et de la RESTful API d√©velopp√©e au module 5 (Exercice 5.2)."),"\n",a.createElement(n.p,null,"L'application ",a.createElement(n.strong,null,"myMovies")," doit maintenant autoriser les op√©rations suivantes aux utilisateurs authentifi√©s uniquement :"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"UC2 : l'ajout d'une ressource de type films via un formulaire d'ajout d'un film."),"\n",a.createElement(n.li,null,"UC3 : la suppression d'un film."),"\n",a.createElement(n.li,null,"UC4 : la mise √† jour des donn√©es d'un film (√† l'exception de l'id associ√© √† un film)."),"\n"),"\n",a.createElement(n.p,null,"Comme auparavant, cette op√©ration est permise pour tous les utilisateurs, anonymes ou authentifi√©s :"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"UC1 : l'affichage, sous forme de tableau, de toutes les ressources de type films."),"\n"),"\n",a.createElement(n.p,null,"Vous allez devoir mettre √† jour tant l'API que le frontend."),"\n",a.createElement(n.p,null,"Voici les op√©rations qui doivent √™tre mises √† disposition par votre API :"),"\n",a.createElement(n.h5,null,'Op√©rations sur les ressources de type "auths"'),"\n",a.createElement(n.table,null,a.createElement(n.thead,null,a.createElement(n.tr,null,a.createElement(n.th,null,"URI"),a.createElement(n.th,null,"M√©thode HTTP"),a.createElement(n.th,null,"Auths?"),a.createElement(n.th,null,"Op√©ration"))),a.createElement(n.tbody,null,a.createElement(n.tr,null,a.createElement(n.td,null,a.createElement(n.strong,null,"auths/register")),a.createElement(n.td,null,"POST"),a.createElement(n.td,null,"Non"),a.createElement(n.td,null,'Cr√©er une ressource de type "users" et renvoyer le username et un token JWT')),a.createElement(n.tr,null,a.createElement(n.td,null,a.createElement(n.strong,null,"auths/login")),a.createElement(n.td,null,"POST"),a.createElement(n.td,null,"Non"),a.createElement(n.td,null,'V√©rifier les credentials d\'une ressource de type "users" et renvoyer le username et un token JWT si les credentials sont OK')))),"\n",a.createElement("br"),"\n",a.createElement(n.h5,null,'Op√©rations sur les ressources de type "films" (ou "movies", selon votre choix)'),"\n",a.createElement(n.table,null,a.createElement(n.thead,null,a.createElement(n.tr,null,a.createElement(n.th,null,"URI"),a.createElement(n.th,null,"M√©thode HTTP"),a.createElement(n.th,null,"Auths?"),a.createElement(n.th,null,"Op√©ration"))),a.createElement(n.tbody,null,a.createElement(n.tr,null,a.createElement(n.td,null,a.createElement(n.strong,null,"films")),a.createElement(n.td,null,"GET"),a.createElement(n.td,null,"Non"),a.createElement(n.td,null,"READ ALL : Lire toutes les ressources de la collection")),a.createElement(n.tr,null,a.createElement(n.td,null,a.createElement(n.strong,null,"films?minimum-duration=value")),a.createElement(n.td,null,"GET"),a.createElement(n.td,null,"Non"),a.createElement(n.td,null,"READ ALL FILTERED : Lire toutes les ressources de la collection selon le filtre donn√©")),a.createElement(n.tr,null,a.createElement(n.td,null,a.createElement(n.strong,null,a.createElement(n.code,null,"films/{id}"))),a.createElement(n.td,null,"GET"),a.createElement(n.td,null,"Non"),a.createElement(n.td,null,"READ ONE : Lire la ressource identifi√©e")),a.createElement(n.tr,null,a.createElement(n.td,null,a.createElement(n.strong,null,"films")),a.createElement(n.td,null,"POST"),a.createElement(n.td,null,"JWT"),a.createElement(n.td,null,"CREATE ONE : Cr√©er une ressource bas√©e sur les donn√©es de la requ√™te")),a.createElement(n.tr,null,a.createElement(n.td,null,a.createElement(n.strong,null,a.createElement(n.code,null,"films/{id}"))),a.createElement(n.td,null,"DELETE"),a.createElement(n.td,null,"JWT"),a.createElement(n.td,null,"DELETE ONE : Effacer la ressource identifi√©e")),a.createElement(n.tr,null,a.createElement(n.td,null,a.createElement(n.strong,null,a.createElement(n.code,null,"films/{id}"))),a.createElement(n.td,null,"PATCH"),a.createElement(n.td,null,"JWT"),a.createElement(n.td,null,"UPDATE ONE : Mettre √† jour les propri√©t√©s de la ressource par les valeurs donn√©es dans la requ√™te, pour une ou plusieurs propri√©t√©s")))),"\n",a.createElement("br"),"\n",a.createElement(n.p,null,"Afin de r√©aliser cet exercice, voici les contraintes d'impl√©mentation :"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"Commencez par mettre √† jour l'API pour ajouter les op√©rations de register, de login, ainsi que les autorisations pour les fonctions d'√©critures sur des ressources de type films. Utilisez le contenu de votre r√©pertoire d'exercices ",a.createElement(n.strong,null,"/exercises/module5/5.2")," comme point de d√©part pour cr√©er, dans votre repository local et votre web repository (normalement appel√© ",a.createElement(n.strong,null,"web2"),"), le r√©pertoire nomm√© ",a.createElement(n.strong,null,"/exercises/module7/7.1/api"),"."),"\n",a.createElement(n.li,null,"Veuillez tester votre API via REST Client pour vous assurer que les autorisations JWT fonctionnent correctement. Quand tout est OK, vous pouvez passer au d√©veloppement de votre frontend."),"\n",a.createElement(n.li,null,"Pour le frontend, utilisez le contenu de votre r√©pertoire d'exercices ",a.createElement(n.strong,null,"/exercises/module6/6.2")," comme point de d√©part pour cr√©er, dans votre repository local et\r\nvotre web repository (normalement appel√© ",a.createElement(n.strong,null,"web2"),"), le r√©pertoire nomm√©\r\n",a.createElement(n.strong,null,"/exercises/module7/7.1/hmi"),"."),"\n",a.createElement(n.li,null,"Veuillez utiliser le proxy de votre frontend afin de contourner les probl√®mes associ√© √† la gestion des CORS."),"\n",a.createElement(n.li,null,"Veuillez d√©velopper de mani√®re incr√©mentale votre IHM, use case par use case, en v√©rifiant le bon fonctionnement de chaque cas d'utilisation avant de passer au d√©veloppement de l'UC suivant.",a.createElement(n.br),"\n","Nous vous recommandons de commencer par le m√©canisme d'authentification en ajoutant l'UC5 et l'UC6. Notez qu'il est facile de d√©marrer avec l'UC6 pour le login d'admin qui existe d√©j√† au niveau de l'API par d√©faut."),"\n",a.createElement(n.li,null,"Pensez √† bien mettre √† jour votre ",a.createElement(n.strong,null,"Navbar")," pour afficher les bons menus :","\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"si l'utilisateur est anonyme : liens uniquement vers la HomePage, vers l'UC1 (view movies), UC5 (login) & UC6 (register) ;"),"\n",a.createElement(n.li,null,"si l'utilisateur est authentifi√© : liens uniquement vers la HomePage, vers l'UC1 (view movies) / UC2 (create) / UC3 (delete) / UC4 (update), UC7 (logout)."),"\n"),"\n"),"\n",a.createElement(n.li,null,"Faites attention, il n'est pas autoris√©, pour des raisons d'ergonomie, que le frontend offre les fonctionnalit√©s d'√©criture de ressources si l'utilisateur n'est pas authentifi√© : UC2 (create), UC3 (delete) et UC4 (update) sont des op√©rations invisibles pour un utilisateur anonyme."),"\n"),"\n",a.createElement(n.h4,null,"ü§ù Tips"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"Cet exercice est l'application du tutoriel vu dans ce module-ci. N'h√©sitez pas donc √† rejouer les √©tapes vues dans le tutoriel au niveau de votre API et √† copier / coller les fichiers utiles (",a.createElement(n.strong,null,"authorize.js"),", ",a.createElement(n.strong,null,"users.js"),", ",a.createElement(n.strong,null,"auths.js"),"...) : ",a.createElement(n.a,{href:"#a"},"a) Authentification s√©curis√©e et autorisation d'acc√®s aux op√©rations d'une RESTful API via JWT"),"."),"\n",a.createElement(n.li,null,"N'oubliez pas de tester chaque op√©ration. Par exemple, il faut bien v√©rifier que l'on ne puisse pas cr√©er une pizza sans token via REST Client."),"\n",a.createElement(n.li,null,"Occupez-vous ensuite du frontend en copiant collant les fichiers utiles trouv√©s dans le tutoriel associ√© √† cette partie (",a.createElement(n.strong,null,"RegisterPage"),", ",a.createElement(n.strong,null,"LoginPage"),", ",a.createElement(n.strong,null,"Logout"),", ",a.createElement(n.strong,null,"auths"),", ",a.createElement(n.strong,null,"Navbar"),"...) : ",a.createElement(n.a,{href:"#b"},"b) Utilisation de JWT au sein d'une IHM"),".",a.createElement(n.br),"\n","Attention √† ne pas oublier de mettre √† jour votre Router (nouvelles pages pour le register, le login et le logout), la Navbar (diff√©rent affichage pour un utilisateur anonyme que pour un utilisateur connect√©), d'ajouter les token dans le header de vos requ√™tes via fetch..."),"\n",a.createElement(n.li,null,"Concernant le Router, il faut mettre √† jour ",a.createElement(n.code,null,"onNavBarClick")," pour que les gestionnaires d'ev√©n√©ments restent attach√©s m√™me quand la Navbar est r√©affich√©e."),"\n",a.createElement(n.li,null,"üí≠ Comment rendre invisible les op√©rations d'√©criture de films ?",a.createElement(n.br),"\n","Par exemple, vous pourriez afficher les boutons ",a.createElement(n.strong,null,"Delete")," et ",a.createElement(n.strong,null,"Save")," que si l'utilisateur est authentifi√©.",a.createElement(n.br),"\n","De m√™me, si l'utilisateur est anonyme, les cellules associ√©es aux films ne devraient pas √™tre √©ditables."),"\n"),"\n",a.createElement(n.p,null,"Veuillez faire un ",a.createElement(n.strong,null,"commit"),' de votre code avec le message suivant :\r\n"',a.createElement(n.strong,null,"myMovies : module 7 : auths"),'"".'),"\n",a.createElement(n.p,null,"NB : Le code de vos applications se trouve dans votre repository local et\r\nvotre web repository (normalement appel√© ",a.createElement(n.strong,null,"web2"),") dans les r√©pertoires nomm√©s\r\n",a.createElement(n.strong,null,"/exercises/module7/7.1/api")," et ",a.createElement(n.strong,null,"/exercises/module7/7.1/hmi"),"."))}var s=function(e){void 0===e&&(e={});const{wrapper:n}=Object.assign({},(0,r.ah)(),e.components);return n?a.createElement(n,e,a.createElement(l,e)):l(e)};function o(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}var u=t(4854),i=t(5583),c=t(5679),m=t(307),d=t(7410),p=t(9523),g=t(8075),E=t(9063),f=t(1631),v=t(5772),h=t(2770),b=t(7008),P=t(9771),z=t(1218),N=(t(5258),t(9394)),q=t(4579),y=t(9416),w=t(9256),A=t(6488),j=t(5175),I=t(6387),C=t(6044);const x={Link:u.Link,Image:c.Z,Section:m.Z,Content:d.Z,Background:p.Z,SectionHeader:g.Z,SectionFooter:E.Z,PageHeader:f.Z,CodeBlock:h.Z,LinkFile:b.Z,ScrollableImage:P.Z,PublicProjectsView:z.Z,AuthenticatedBlock:N.Z,UnAuthenticatedBlock:q.Z,NestedMdxBlock:y.Z,YoutubeImage:w.Z,InternalPageMenu:A.Z,InternalPageMenuItem:j.Z,InternalPageTitle:I.Z,PathViewer:C.k,PathViewerItem:C.F};function T(e){var n,t,l,s,o;let{data:{mdx:u,allImages:c},children:m}=e;return x.PageHeader=(0,v.u)(f.Z,null==u?void 0:u.frontmatter),a.createElement(i.Z,Object.assign({},null!=u&&u.frontmatter?{frontmatter:u.frontmatter}:{},null!=u&&null!==(n=u.frontmatter)&&void 0!==n&&n.navbarExtraStyles?{navbarExtraStyles:u.frontmatter.navbarExtraStyles}:{},null!=u&&null!==(t=u.frontmatter)&&void 0!==t&&t.headerImage?{headerImage:u.frontmatter.headerImage}:{},null!=u&&null!==(l=u.frontmatter)&&void 0!==l&&l.featuredImage?{featuredImage:u.frontmatter.featuredImage}:{},null!=u&&null!==(s=u.frontmatter)&&void 0!==s&&s.title?{pageTitle:u.frontmatter.title}:{},c&&c.length>0?{allImages:c}:{}),a.createElement(r.Zo,{components:x},a.createElement("div",{className:null!=u&&null!==(o=u.frontmatter)&&void 0!==o&&o.autoMargin?"page page--auto-margin":"page"},m)))}function U(e){return a.createElement(T,e,a.createElement(s,e))}}}]);
//# sourceMappingURL=component---src-templates-mdx-pages-js-content-file-path-src-mdx-pages-part-4-auths-hmi-fr-mdx-308e32466435fd09fe04.js.map